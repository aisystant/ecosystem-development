# ДЗ-чекер: ИИ-проверка домашних заданий

Система автоматической проверки домашних заданий студентов с использованием LLM и репозитория руководств.

## Назначение

ДЗ-чекер — это ИИ-агент, который:
- Принимает ответы студентов из LMS по заданиям типа «чеклист/дз»
- Сопоставляет их с нормативными материалами из **репозитория руководств**
- Оценивает по заданным критериям (рубрикам) с помощью LLM
- Возвращает структурированную обратную связь студенту

**Источник нормативных материалов:** [Репозиторий руководств](../../../0.%20Управление/0.9.%20Входящие/Структура%20репозитория%20руководств%200.9.md) — хранилище текстов руководств образовательных программ ШСМ.

---

## Системы и их взаимодействие

```
                                              ┌────────────────┐
                                              │                │
                                              │  Репозиторий   │
                                              │  руководств    │
                                              └────────────────┘
                                                 ▲          │
                                            [A3] │          │ [A4]
                                                 │          ▼
┌────────────────┐  [A1]  ┌────────────────┐  [A2]  ┌────────────────┐  [A5]  ┌────────────────┐
│                │        │                │        │                │        │                │
│    Студент     │ ─────▶ │      LMS       │ ─────▶ │   ДЗ-чекер     │ ─────▶ │      LLM       │
│                │        │                │        │                │        │                │
│                │ ◀───── │                │ ◀───── │                │ ◀───── │                │
│                │  [A8]  │                │  [A7]  │                │  [A6]  │                │
└────────────────┘        └────────────────┘        └────────────────┘        └────────────────┘
```

### Роли систем

| Система | Роль | Данные |
|---------|------|--------|
| **Студент** | Источник ответа | Текст ответа на пункт чеклиста/ДЗ |
| **LMS (Aisystant)** | Хранилище и интерфейс | Вопросы, ответы, метаданные, результаты |
| **ДЗ-чекер** | Движок проверки | Логика сборки контекста и запросов |
| **Репозиторий руководств** | Источник норматива | Тексты руководств, рубрики, карта вопросов |
| **LLM** | Исполнитель проверки | Сопоставление ответа с критериями |

---

## Артефакты (пакеты), которые "текут" по процессу

| № | Артефакт | Откуда → Куда | Описание |
|---|----------|---------------|----------|
| A1 | Ответ студента | Студент → LMS | Текст ответа + действие «Проверить с ИИ» |
| A2 | Пакет на проверку | LMS → ДЗ-чекер | Ответ + вопрос + метаданные |
| A3 | Запрос контекста | ДЗ-чекер → Репозиторий | Идентификатор вопроса для поиска норматива |
| A4 | Контекст проверки | Репозиторий → ДЗ-чекер | Норматив (фрагмент руководства) + рубрика |
| A5 | Запрос к LLM | ДЗ-чекер → LLM | Промпт с ответом, нормативом и критериями |
| A6 | Результат проверки | LLM → ДЗ-чекер | Вердикт, баллы, замечания, рекомендации |
| A7 | Пакет результата | ДЗ-чекер → LMS | Форматированный комментарий для отображения |
| A8 | Отображение результата | LMS → Студент | Комментарий ИИ-проверки в интерфейсе |

---

## Процесс проверки по шагам

### Шаг 1. Студент инициирует проверку в LMS

**Вход:**
- Текст ответа, набранный студентом в поле комментария к пункту чеклиста/ДЗ

**Действие (студент в интерфейсе LMS):**
- Ввод текста ответа в поле комментария
- Нажатие кнопки «Проверить с ИИ»

**Выход → LMS (артефакт A1: Ответ студента):**
- Текст ответа
- Идентификатор студента
- Идентификатор пункта чеклиста/ДЗ
- Время отправки

---

### Шаг 2. LMS отправляет пакет на проверку

**Вход:**
- Артефакт A1 (ответ студента)
- Данные пункта из банка заданий LMS

**Действие (внутри LMS):**
- Извлечение текста вопроса/пункта
- Добавление метаданных (курс, раздел)
- Формирование пакета на проверку

**Выход → ДЗ-чекер (артефакт A2: Пакет на проверку):**
- Текст ответа студента по выбранному пункту
- Текст вопроса/пункта
- Информация о разделе (текст из дерева навигации)
- Информация о курсе (текстовое название)

---

### Шаг 3. ДЗ-чекер запрашивает контекст из репозитория руководств

**Вход:**
- Артефакт A2 (пакет на проверку) — информация о курсе и разделе

**Действие (внутри ДЗ-чекера):**
- Валидация входящего пакета
- Поиск соответствующего руководства в репозитории по названию курса
- Формирование запроса к репозиторию руководств

**Выход → Репозиторий (артефакт A3: Запрос контекста):**
- Название курса
- Текст раздела из навигации

---

### Шаг 4. Репозиторий руководств возвращает контекст проверки

**Вход:**
- Артефакт A3 (запрос контекста)

**Действие (внутри репозитория руководств):**
- Поиск руководства по названию курса
- Определение раздела по тексту навигации
- Загрузка фрагмента текста руководства (норматив)
- Загрузка рубрики проверки (критерии с весами)

**Выход → ДЗ-чекер (артефакт A4: Контекст проверки):**
- Путь к разделу руководства
- Название раздела
- Текст норматива (фрагмент руководства)
- Рубрика проверки:
  - Название рубрики
  - Список критериев (идентификатор, вес, описание)
- Версия материалов

---

### Шаг 5. ДЗ-чекер отправляет запрос в LLM

**Вход:**
- Артефакт A2 (пакет на проверку) — вопрос и ответ
- Артефакт A4 (контекст проверки) — норматив и рубрика

**Действие (внутри ДЗ-чекера):**
- Загрузка системного промпта (роль наставника)
- Загрузка шаблона проверки
- Подстановка данных: вопрос, ответ, норматив, критерии
- Формирование запроса к API

**Выход → LLM (артефакт A5: Запрос к LLM):**
- Системный промпт (роль и принципы проверки)
- Текст вопроса
- Текст ответа студента
- Текст норматива
- Список критериев оценки
- Требования к формату ответа

---

### Шаг 6. LLM возвращает результат проверки

**Вход:**
- Артефакт A5 (запрос к LLM)

**Действие (внутри LLM):**
- Анализ ответа студента
- Сопоставление с нормативом
- Оценка по каждому критерию рубрики
- Формирование структурированного ответа

**Выход → ДЗ-чекер (артефакт A6: Результат проверки):**
- Вердикт (принято / на доработку / не принято)
- Общий балл (0–100)
- Сильные стороны ответа (список)
- Замечания (список):
  - Критерий
  - Что не так
  - Как исправить
- Рекомендация следующего шага
- Баллы по отдельным критериям

---

### Шаг 7. ДЗ-чекер возвращает результат в LMS (синхронно)

**Вход:**
- Артефакт A6 (результат проверки) от LLM
- Артефакт A2 (пакет на проверку)

**Действие (внутри ДЗ-чекера):**
- Проверка полноты результата
- Форматирование в читаемый вид (Markdown)

**Выход → LMS (артефакт A7: Пакет результата):**
- Текст комментария (форматированный)
- Время проверки

---

### Шаг 8. LMS показывает результат студенту

**Вход:**
- Артефакт A7 (пакет результата) от ДЗ-чекера

**Действие (внутри LMS):**
- Отображение текста результата в интерфейсе

**Выход → Студент (артефакт A8: Отображение результата):**
- Студент видит комментарий ИИ-проверки в интерфейсе LMS

> **Примечание v0.1:** Результат проверки нигде не сохраняется и потеряется при обновлении страницы или переходе на другие разделы курса.

---

## Концепции основных систем

### ДЗ-чекер: архитектура на базе n8n

ДЗ-чекер — это workflow в n8n, который оркестрирует проверку домашних заданий. Он не содержит логики оценивания — её выполняет LLM.

**Почему n8n:**
- Low-code платформа — быстрая разработка и изменения без программирования
- Визуальная отладка — видно поток данных на каждом шаге
- Встроенные интеграции — готовые ноды для HTTP, AI, работы с данными
- Self-hosted — полный контроль над данными студентов
- Активное сообщество и документация

#### Архитектура workflow

```
┌─────────────────────────────────────────────────────────────────────────┐
│                     n8n: ДЗ-чекер workflow                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────┐     ┌─────────────┐     ┌─────────────────────────┐   │
│  │  Webhook    │     │   Code      │     │   HTTP Request          │   │
│  │  Trigger    │────▶│   Node      │────▶│   (Репозиторий          │   │
│  │  (от LMS)   │     │ (валидация) │     │    руководств)          │   │
│  └─────────────┘     └─────────────┘     └─────────────────────────┘   │
│                                                    │                    │
│                                                    ▼                    │
│  ┌─────────────┐     ┌─────────────┐     ┌─────────────────────────┐   │
│  │  Respond    │     │   Code      │     │   HTTP Request          │   │
│  │  to         │◀────│   Node      │◀────│   (Claude API)          │   │
│  │  Webhook    │     │ (формат)   │     │                         │   │
│  └─────────────┘     └─────────────┘     └─────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

#### Ноды workflow

| Нода | Тип | Назначение |
|------|-----|------------|
| **Webhook Trigger** | Trigger | Принимает POST-запрос от LMS с данными для проверки |
| **Validate Input** | Code | Проверяет структуру входных данных, извлекает поля |
| **Get Context** | HTTP Request | Запрос к API репозитория руководств за нормативом и рубрикой |
| **Build Prompt** | Code | Собирает промпт из шаблона, подставляя ответ, норматив, критерии |
| **Call Claude** | HTTP Request | Запрос к Claude API (или нода Anthropic, если есть) |
| **Format Result** | Code | Преобразует ответ LLM в Markdown для студента |
| **Respond to Webhook** | Response | Синхронный возврат результата в LMS |

#### Пример структуры данных между нодами

**Webhook Trigger → Validate Input:**
```json
{
  "answer": "Текст ответа студента...",
  "question": "Текст вопроса...",
  "section": "1.2. Системное мышление",
  "course": "Системное мышление"
}
```

**Get Context → Build Prompt:**
```json
{
  "normative_text": "Системное мышление — это...",
  "rubric": {
    "name": "Понимание концепции",
    "criteria": [
      {"id": "key_idea", "weight": 40, "description": "Ключевая идея"},
      {"id": "example", "weight": 30, "description": "Собственный пример"}
    ]
  }
}
```

#### Выбор LLM

**Основная модель:** Claude 3.5 Sonnet (`claude-3-5-sonnet-20241022`)
- Оптимальный баланс качества и стоимости для задач проверки
- Хорошее понимание контекста и рубрик
- Вызов через HTTP Request ноду к https://api.anthropic.com/v1/messages

**Размещение LLM:** Внешний сервис Anthropic
- API-ключ хранится в n8n Credentials
- Не требует собственной инфраструктуры для GPU

**Fallback-модели (v0.3):**
- OpenAI GPT-4o — через Switch нода при ошибке Claude
- Настраивается через Error Trigger workflow

---

### Репозиторий руководств: архитектура

Репозиторий руководств — это **git-репозиторий с markdown-файлами** плюс **простой HTTP API** для выдачи контекста.

```
┌────────────────────────────────────────────────────────────────┐
│                   Репозиторий руководств                       │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │              Git-репозиторий (GitHub)                    │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      │ │
│  │  │ guides/     │  │ rubrics/    │  │ mappings/   │      │ │
│  │  │ *.md        │  │ *.yaml      │  │ *.yaml      │      │ │
│  │  │ (тексты     │  │ (рубрики    │  │ (карта      │      │ │
│  │  │ руководств) │  │ проверки)   │  │ вопросов)   │      │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘      │ │
│  └──────────────────────────────────────────────────────────┘ │
│                              │                                 │
│                              ▼                                 │
│  ┌──────────────────────────────────────────────────────────┐ │
│  │              API-сервер (FastAPI / Flask)                │ │
│  │  ┌─────────────────────────────────────────────────────┐ │ │
│  │  │  GET /check-context                                 │ │ │
│  │  │  Параметры: course_name, section_title              │ │ │
│  │  │  Ответ: {normative_text, rubric, section_path}      │ │ │
│  │  └─────────────────────────────────────────────────────┘ │ │
│  │                                                          │ │
│  │  Функции:                                                │ │
│  │  • Поиск руководства по названию курса                  │ │
│  │  • Извлечение раздела по заголовку                      │ │
│  │  • Подбор рубрики по типу задания                       │ │
│  │  • Кэширование для ускорения                            │ │
│  └──────────────────────────────────────────────────────────┘ │
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

**Структура git-репозитория:**

```
guides-repository/
├── guides/                        # Тексты руководств
│   ├── systems-thinking/          # По курсам
│   │   ├── chapter-01.md
│   │   ├── chapter-02.md
│   │   └── ...
│   └── modeling/
│       └── ...
├── rubrics/                       # Рубрики проверки
│   ├── concept-understanding.yaml # Понимание концепции
│   ├── deep-understanding.yaml    # Глубокое понимание
│   └── practical-application.yaml # Практическое применение
├── mappings/                      # Карты соответствий
│   ├── courses.yaml               # Курс → путь к руководству
│   └── questions.yaml             # Вопрос → раздел + рубрика
├── api/                           # API-сервер
│   ├── main.py                    # FastAPI приложение
│   ├── requirements.txt
│   └── Dockerfile
└── README.md
```

**Примечание:** Для v0.1 API-сервер можно заменить на второй n8n workflow, который отдаёт контекст напрямую из файлов (нода Read Binary File + Code для парсинга).

---

### Инфраструктура развёртывания

```
┌─────────────────────────────────────────────────────────────────────┐
│                        Инфраструктура                               │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│   ┌─────────────┐      ┌─────────────┐      ┌─────────────────┐    │
│   │    LMS      │      │    n8n      │      │   Репозиторий   │    │
│   │  (Aisystant)│─────▶│  (Docker)   │─────▶│   руководств    │    │
│   │             │      │             │      │   (API/файлы)   │    │
│   └─────────────┘      └──────┬──────┘      └─────────────────┘    │
│                               │                                     │
│                               ▼                                     │
│                        ┌─────────────┐                             │
│                        │ Claude API  │                             │
│                        │ (Anthropic) │                             │
│                        └─────────────┘                             │
│                                                                     │
│   Размещение n8n:                                                  │
│   • n8n Cloud — быстрый старт, управляемый хостинг                 │
│   • Self-hosted Docker — на VPS (Selectel, Timeweb)                │
│   • Self-hosted + PostgreSQL — для production                      │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

**Варианты размещения n8n:**

| Вариант | Плюсы | Минусы | Когда использовать |
|---------|-------|--------|-------------------|
| **n8n Cloud** | Без настройки, автообновления | Платный, данные на стороне n8n | Быстрый старт, прототип |
| **Docker на VPS** | Контроль данных, дешевле | Нужна настройка | v0.1 Production |
| **Docker + PostgreSQL** | Надёжность, бэкапы | Сложнее настройка | v0.2+ Production |

---

## Что нужно сделать по каждой системе

### LMS (Aisystant)

| Задача | Приоритет | Описание |
|--------|-----------|----------|
| **Кнопка «Проверить с ИИ»** | v0.1 | Кнопка для пунктов чеклиста/ДЗ |
| **Проверка подписки БР** | v0.1 | Доступ только для пользователей с подпиской БР |
| **Вызов endpoint ДЗ-чекера** | v0.1 | Синхронный POST-запрос с данными |
| **Отображение результата** | v0.1 | Показ текста проверки (без сохранения) |
| **Сохранение результатов** | v0.2 | Запись результатов в БД |
| **Статусы проверки** | v0.2 | Отображение: «На проверке ИИ», «Проверено ИИ» |

### ДЗ-чекер (n8n workflow)

| Задача | Приоритет | Описание |
|--------|-----------|----------|
| **Webhook Trigger** | v0.1 | Настройка webhook для приёма POST-запросов от LMS |
| **Validate Input (Code)** | v0.1 | Code нода для валидации и извлечения полей запроса |
| **Get Context (HTTP Request)** | v0.1 | HTTP Request нода для запроса контекста из репозитория |
| **Build Prompt (Code)** | v0.1 | Code нода для сборки промпта с нормативом и критериями |
| **Call Claude (HTTP Request)** | v0.1 | HTTP Request нода для вызова Claude API |
| **Format Result (Code)** | v0.1 | Code нода для форматирования ответа в Markdown |
| **Respond to Webhook** | v0.1 | Response нода для синхронного возврата результата |
| **Credentials** | v0.1 | Настройка credentials для Claude API в n8n |
| **Шаблон промпта** | v0.1 | Текст системного промпта и шаблона проверки |
| **Error Handling** | v0.2 | Error Trigger workflow для обработки ошибок |
| **Fallback workflow** | v0.3 | Switch нода для переключения на GPT-4o при ошибке Claude |
| **Логирование** | v0.2 | Отправка логов в отдельный workflow или webhook |

### Репозиторий руководств

| Задача | Приоритет | Описание |
|--------|-----------|----------|
| **Git-репозиторий** | v0.1 | Создание репозитория с структурой guides/, rubrics/, mappings/ |
| **Структура руководств** | v0.1 | Организация markdown-файлов по курсам с чёткими разделами |
| **API-сервер или n8n workflow** | v0.1 | Эндпоинт /check-context (FastAPI или второй n8n workflow) |
| **Базовые рубрики** | v0.1 | YAML-файлы с критериями: понимание концепции, глубокое понимание |
| **Карта courses.yaml** | v0.1 | Соответствие название курса → путь к руководству |
| **Dockerfile для API** | v0.1 | Контейнеризация API-сервера (если не n8n) |
| **Наполнение карты вопросов** | v0.2 | Связать все вопросы ДЗ с разделами руководств |
| **Версионирование** | v0.2 | Git-теги для отслеживания версий материалов |
| **Кэширование** | v0.2 | In-memory кэш для ускорения запросов |

### LLM (Внешний сервис)

| Задача | Приоритет | Описание |
|--------|-----------|----------|
| **Аккаунт Anthropic** | v0.1 | Регистрация в Anthropic Console |
| **API-ключ** | v0.1 | Получение ключа, сохранение в n8n Credentials |
| **Лимиты и биллинг** | v0.1 | Настройка лимитов расходов в Anthropic Console |
| **Ограничение частоты** | v0.2 | Rate limiting через n8n (Limit node или Code) |
| **Fallback-модели** | v0.3 | Credentials для OpenAI/Google как резерв |

### Инфраструктура (n8n)

| Задача | Приоритет | Описание |
|--------|-----------|----------|
| **Выбор размещения n8n** | v0.1 | n8n Cloud для прототипа или VPS для production |
| **VPS-сервер** | v0.1 | Аренда VPS (Selectel/Timeweb) если self-hosted |
| **Docker Compose для n8n** | v0.1 | Конфигурация: n8n + PostgreSQL (опционально) |
| **HTTPS/Домен** | v0.1 | Настройка домена и SSL для webhook URL |
| **n8n Credentials** | v0.1 | Настройка всех API-ключей в интерфейсе n8n |
| **Экспорт workflows** | v0.1 | JSON-экспорт workflow для версионирования в git |
| **Мониторинг n8n** | v0.2 | Настройка алертов на ошибки выполнения |
| **PostgreSQL** | v0.2 | Переход с SQLite на PostgreSQL для надёжности |
| **Резервное копирование** | v0.2 | Бэкапы БД n8n и workflows |
| **CI/CD для workflows** | v0.2 | Автоматический импорт workflows при деплое |

---

## Интерфейс для студента (третий экран)

```
┌────────────────────────────────────────────────────────────┐
│  Результат ИИ-проверки                                     │
├────────────────────────────────────────────────────────────┤
│                                                            │
│  ✓ Принято (85/100)                    08.09.2025 в 20:35 │
│                                                            │
│  Сильные стороны:                                          │
│  • Верно указано, что любая модель фокусируется на        │
│    определённых свойствах                                  │
│  • Хороший пример с программным продуктом                  │
│                                                            │
│  Замечания:                                                │
│  • Не использован термин «описание системы» —              │
│    рекомендую использовать точную терминологию             │
│                                                            │
│  Следующий шаг:                                            │
│  Попробуйте привести ещё один пример из вашей практики    │
│                                                            │
│  ─────────────────────────────────────────────────────     │
│  Проверено: Claude 3.5 Sonnet                             │
│  По материалам: Глава 1, раздел 1.1                        │
│                                                            │
└────────────────────────────────────────────────────────────┘
```

---

## Ключевые компоненты в репозитории руководств

### Карта вопросов

Связывает идентификаторы вопросов LMS с материалами:

- **Идентификатор вопроса** → путь к файлу руководства
- **Раздел руководства** → конкретный заголовок/якорь
- **Рубрика** → какой набор критериев применять
- **Ключевые слова** → для поиска и проверки

### Рубрики проверки

Критерии с весами для оценки:

- **Понимание концепции:**
  - Ключевая идея (40%)
  - Собственный пример (30%)
  - Терминология (20%)
  - Полнота (10%)

- **Глубокое понимание:**
  - Суть концепции (35%)
  - Аргументация (35%)
  - Связи с другими понятиями (20%)
  - Рефлексия (10%)

---

## Пороги автоматических решений

| Диапазон баллов | Действие |
|-----------------|----------|
| 80–100 | Автоматически принять |
| 60–79 | Отправить наставнику на проверку |
| 0–59 | Автоматически вернуть на доработку |

---

## Реализация

Код агента: `agents-core/homework-checker/`

```
agents-core/homework-checker/
├── README.md                 # Техническая документация
├── manifest.json             # Манифест агента
├── server.py                 # HTTP-сервер с endpoint
├── config.yaml               # Конфигурация
├── data/
│   ├── questions_map.yaml    # Карта вопросов
│   ├── rubrics.yaml          # Рубрики
│   └── prompts/              # Промпты для LLM
├── schemas/                  # Схемы данных
└── examples/                 # Примеры данных
```

---

## Roadmap

### v0.1 — Первый релиз (MVP)

**Ограничения:**
- Только задания типа «чеклист/ДЗ»
- Проверка инициируется студентом по каждому пункту чеклиста/ДЗ отдельно
- Доступно только студентам с действующей подпиской БР

**Процесс:**
1. Студент заполняет комментарий к заданию
2. Нажимает кнопку «Проверить с ИИ»
3. С фронта на endpoint ДЗ-чекера отправляется:
   - Текст заполненного ответа студента по выбранному пункту
   - Текст вопроса
   - Информация о разделе (отображаемый в дереве навигации текст раздела, без идентификаторов)
   - Информация о курсе (текстовое название курса, без идентификаторов и номеров версий)
4. ДЗ-чекер обрабатывает запрос, возвращает синхронно результат проверки (текст)
5. Студенту на фронте отображается текст результата

**Важно:** В v0.1 результат проверки нигде не сохраняется и потеряется при обновлении страницы или переходе на другие разделы курса.

**Технические задачи:**
- HTTP-endpoint для синхронной проверки
- Интеграция с репозиторием руководств
- Интеграция с Claude API
- Базовые промпты для проверки

### v0.2 — Интеграция и сохранение

- Сохранение результатов проверки в LMS
- Карта вопросов (связь идентификаторов с руководствами)
- Рубрики проверки по типам вопросов
- Логирование и мониторинг
- Статусы проверки в интерфейсе

### v0.3 — Улучшения

- Резервные модели LLM
- Кэширование контекста
- Обратная связь от наставников
- Пакетная обработка

### v1.0 — Production

- Полный API для LMS
- Панель мониторинга
- Поддержка нескольких курсов
- Аналитика качества проверок

---

## Открытые вопросы

1. ~~**Формат обмена с LMS** — webhook, REST API, или файловый обмен?~~ → v0.1: n8n Webhook (синхронный)
2. ~~**Архитектура ДЗ-чекера** — какие модули, на чём строить?~~ → v0.1: n8n workflow
3. ~~**Какой LLM использовать** — Claude, GPT, локальный?~~ → v0.1: Claude 3.5 Sonnet (API)
4. ~~**n8n vs код** — использовать ли n8n для оркестрации или чистый Python?~~ → n8n
5. **Хранение результатов** — в LMS, в репозитории, или в отдельной БД? → v0.2
6. **Роль наставника** — всегда проверяет после ИИ или только спорные случаи?
7. **Версионирование материалов** — как отслеживать, по какой версии руководства проверяли?
8. **Репозиторий: API или n8n?** — делать отдельный FastAPI-сервер или второй n8n workflow?

---

**Статус:** Концепция v0.1 (архитектура на n8n)
**Дата:** 2025-12-25
