---

title: Концепция Проводника (Ассистент Ученика)
family: F8
cell: '3.2'
version: v1.0
status: active
date_created: '2025-12-18'
date_modified: '2025-12-18'
related:
- Описание ИИ-ассистента Проводник (Ассистент Ученика) 3.2
- Концепция использования Проводника (Ассистент Ученика) 3.2
- Цифровой двойник 3.2
- Memory Bank 3.2
- AI OS 3.2
description: 'Техническая концепция ИИ-ассистента Проводник (Ассистент Ученика): архитектура, компоненты, API, хранилище данных, метрики'
type: doc
created: '2025-12-18'
layer: service
scope: local-edge
security: internal
aliases:
- Архитектура Проводника
- Техническое описание Проводника
---

# Концепция Проводника (Ассистент Ученика) 3.2

> **Открытый ящик:** данный документ описывает внутреннее устройство Проводника — архитектуру, компоненты, API, хранилище данных. Пользовательский взгляд описан в документе [[Концепция использования Проводника (Ассистент Ученика) 3.2]].

## Роль в архитектуре экосистемы

Проводник — центральная точка персонализации экосистемы:
- Получает контекст от **Digital Twin** (цели, навыки, состояние)
- Извлекает знания из **Memory Bank** (методы, практики)
- Генерирует рекомендации для **AI OS** (что выполнить)
- Отслеживает результаты через **Activity Hub** (что сделано)
- Обновляет профиль через **Digital Twin** (как изменился)

---

## Архитектура

### Компоненты

#### 1. Path Builder (Построитель маршрутов)

**Назначение:** Создание персональных траекторий развития на основе целей и текущих навыков.

**Функции:**
- **Goal Analysis** — анализ OKR участника, декомпозиция на подцели
- **Skill Gap Detection** — выявление разрывов между текущими и целевыми навыками
- **Path Generation** — формирование последовательности шагов (курсы, проекты, задания)
- **Dependency Resolution** — учёт зависимостей между навыками (prerequisites)
- **Timeline Planning** — распределение шагов по времени с учётом доступности

**Алгоритмы:**
- Граф зависимостей навыков (skill dependency graph)
- Shortest path с учётом приоритетов и ограничений
- Multi-objective optimization (время, стоимость, эффективность)
- Constraint satisfaction (доступное время, бюджет, энергия)

**Интеграции:**
- Digital Twin — цели, навыки, ограничения
- Memory Bank — методы и практики
- LMS — доступные курсы и модули
- Case Management — доступные проекты

#### 2. Recommender Engine (Движок рекомендаций)

**Назначение:** Генерация следующего лучшего действия (Next Best Action) с учётом контекста.

**Функции:**
- **Context Retrieval** — извлечение текущего контекста (время дня, энергия, last activity)
- **Action Scoring** — оценка кандидатов по критериям (relevance, impact, effort, timing)
- **Ranking** — упорядочивание по приоритету с учётом constraints
- **Explanation Generation** — создание обоснования рекомендации

**Типы рекомендаций:**
- **Learning** — следующий урок, курс, модуль
- **Practice** — задание, упражнение, кейс
- **Project** — присоединение к проекту, создание нового
- **Social** — менторство, peer learning, события клуба
- **Reflection** — ревью прогресса, обновление целей
- **Rest** — перерыв, снижение нагрузки (при burnout risk)

**Механизм выбора:**
```python
def select_next_action(user_context, candidate_actions):
    scores = []
    for action in candidate_actions:
        score = (
            relevance(action, user_context.goals) * 0.4 +
            impact(action, user_context.skill_gaps) * 0.3 +
            timing_fit(action, user_context.schedule) * 0.2 +
            energy_fit(action, user_context.energy_level) * 0.1
        )
        scores.append((action, score))

    # Сортировка с учётом explore-exploit
    return balance_exploitation_exploration(scores, user_context.exploration_rate)
```

**Интеграции:**
- Digital Twin — текущее состояние и контекст
- Activity Hub — последние активности
- AI OS — планирование выполнения

#### 3. Progress Tracker (Трекер прогресса)

**Назначение:** Мониторинг продвижения по маршруту и выявление отклонений.

**Функции:**
- **Milestone Tracking** — отслеживание достижения вех (milestones)
- **Completion Analysis** — анализ выполнения шагов (completed, in-progress, blocked)
- **Deviation Detection** — обнаружение отклонений от плана
- **Bottleneck Identification** — выявление узких мест и блокеров
- **Progress Visualization** — визуализация прогресса для участника

**Метрики:**
- **Completion Rate** — доля выполненных шагов
- **Velocity** — скорость прогресса (steps per week)
- **Quality Score** — качество выполнения (на основе peer review)
- **Time to Milestone** — время до достижения вехи
- **Deviation Index** — степень отклонения от плана

**Визуализация:**
- Timeline прогресса с вехами
- Skill radar (текущие vs целевые навыки)
- Burndown chart (оставшаяся работа)
- Gantt chart для проектов

**Интеграции:**
- Activity Hub — события выполнения
- Digital Twin — обновление навыков
- Proof-of-Impact — метрики достижений

#### 4. Adaptive Replanner (Адаптивный переплановщик)

**Назначение:** Автоматическая корректировка маршрута при изменении обстоятельств.

**Функции:**
- **Trigger Detection** — обнаружение событий, требующих переплана
- **Impact Assessment** — оценка влияния изменений на план
- **Replan Generation** — генерация обновлённого маршрута
- **Change Notification** — уведомление участника о корректировках

**Триггеры переплана:**
- Изменение целей (OKR updates)
- Изменение доступного времени (schedule changes)
- Новые навыки (skill updates)
- Блокеры (stuck on step)
- Внешние события (новые курсы, проекты, возможности)
- Состояние участника (burnout risk, energy drop)

**Стратегии переплана:**
- **Minor adjustments** — смещение шагов по времени
- **Alternative paths** — замена шагов на эквивалентные
- **Goal reprioritization** — изменение приоритетов целей
- **Scope reduction** — упрощение маршрута (при перегрузке)

**Интеграции:**
- Digital Twin — изменения профиля
- Activity Hub — события триггеры
- LMS — новые возможности обучения

#### 5. Nudge Engine (Движок подсказок)

**Назначение:** Мягкие напоминания и мотивационные подталкивания для поддержания прогресса.

**Функции:**
- **Timing Optimization** — выбор оптимального времени для nudge
- **Message Personalization** — персонализация текста под участника
- **Channel Selection** — выбор канала (email, push, in-app, bot)
- **Frequency Control** — управление частотой (не спамить)

**Типы nudges:**
- **Reminder** — напоминание о запланированной активности
- **Encouragement** — мотивация при снижении активности
- **Celebration** — поздравление с достижением вехи
- **Warning** — предупреждение о риске (goal drift, burnout)
- **Opportunity** — уведомление о новой возможности
- **Feedback Request** — запрос обратной связи

**Механика:**
```python
def generate_nudge(user_context, nudge_type):
    timing = optimal_nudge_time(user_context.engagement_patterns)
    message = personalize_message(
        template=nudge_templates[nudge_type],
        user=user_context.profile,
        tone=user_context.preferences.tone
    )
    channel = select_channel(user_context.preferences.channels)

    return Nudge(message=message, timing=timing, channel=channel)
```

**Интеграции:**
- Digital Twin — предпочтения и паттерны
- CRM — каналы коммуникации
- Activity Hub — логирование nudges

#### 6. Mentor Matcher (Подборщик менторов)

**Назначение:** Подбор подходящих менторов и peer groups для участника.

**Функции:**
- **Mentor Discovery** — поиск менторов по критериям
- **Compatibility Scoring** — оценка совместимости
- **Introduction Facilitation** — организация знакомства
- **Relationship Tracking** — отслеживание менторских пар

**Критерии подбора:**
- Экспертиза ментора (навыки, достижения)
- Доступность (время, загрузка)
- Совместимость стилей (teaching style, personality)
- История менторства (success rate, feedback)
- Общие интересы и цели

**Алгоритм:**
- Collaborative filtering (на основе успешных пар)
- Content-based matching (skill overlap)
- Graph-based recommendations (social connections)

**Интеграции:**
- Digital Twin — навыки и цели
- Club — социальный граф
- CRM — управление менторством

---

## Технологический стек

**Backend:**
- Python/FastAPI для API
- Recommendation engine на scikit-learn, LightGBM
- Scheduling и planning на OR-Tools (constraint solving)
- PostgreSQL для маршрутов и метрик
- Neo4j для графа навыков и зависимостей

**ML/AI:**
- Recommendation models (collaborative filtering, content-based)
- NLP для генерации объяснений (explanation generation)
- Time series forecasting (прогноз прогресса)
- Anomaly detection (обнаружение блокеров)

**Frontend:**
- React/Next.js для web UI
- D3.js для визуализаций (timeline, skill radar)
- Mobile apps для nudges

**Инфраструктура:**
- Kubernetes
- Kafka для событий
- Redis для кеша рекомендаций
- Airflow для периодических задач (replan, nudges)

---

## Процессы

### П1. Инициализация персонального маршрута

**Назначение:** Создание первого маршрута для нового участника.

**Этапы:**
1. **Onboarding Interview** — сбор целей, интересов, доступного времени
2. **Initial Assessment** — оценка текущих навыков (self-assessment + тесты)
3. **Goal Setting** — формулирование OKR (с помощью ИИ)
4. **Skill Gap Analysis** — выявление разрывов
5. **Path Generation** — построение первого маршрута
6. **Review & Confirmation** — участник подтверждает или корректирует
7. **First Action** — рекомендация первого шага

**Метрики:**
- Time to First Path (<30 минут)
- Path Acceptance Rate (>80%)
- Completion of First Action within 7 days (>70%)

**Интеграции:**
- Digital Twin — создание профиля
- LMS — курсы для первых шагов
- Club — онбординг в сообщество

### П2. Ежедневные рекомендации (Daily Flow)

**Назначение:** Ежедневная генерация следующего лучшего действия.

**Этапы:**
1. **Context Update** — обновление контекста (time, energy, last activity)
2. **Action Candidates** — формирование списка кандидатов
3. **Scoring** — оценка каждого кандидата
4. **Selection** — выбор top-3 рекомендаций
5. **Presentation** — показ участнику с обоснованием
6. **Execution Tracking** — отслеживание выполнения
7. **Feedback Collection** — сбор обратной связи (completed, skipped, helpful?)

**Интеграции:**
- Digital Twin — контекст
- AI OS — выполнение действий
- Activity Hub — логирование

### П3. Недельный ревью и перепланировка

**Назначение:** Еженедельный анализ прогресса и корректировка маршрута.

**Этапы:**
1. **Progress Summary** — сводка за неделю (что сделано, не сделано)
2. **Skill Updates** — обновление карты навыков
3. **Goal Progress** — прогресс по OKR
4. **Blocker Analysis** — выявление препятствий
5. **Plan Adjustment** — корректировка маршрута на следующую неделю
6. **Nudge Planning** — планирование nudges
7. **Participant Review** — участник ревьюит и подтверждает

**Механика:**
```python
def weekly_review(user_id, week_number):
    # 1. Собрать активности за неделю
    activities = activity_hub.get_user_activities(user_id, week=week_number)

    # 2. Проанализировать прогресс
    progress = analyze_progress(activities, user_path)

    # 3. Обновить навыки
    skill_updates = calculate_skill_changes(activities)
    digital_twin.update_skills(user_id, skill_updates)

    # 4. Выявить блокеры
    blockers = detect_blockers(progress, user_path)

    # 5. Сгенерировать новый план
    next_week_plan = replan(user_path, progress, blockers)

    # 6. Уведомить участника
    notify_review_ready(user_id, progress, next_week_plan)
```

**Интеграции:**
- Activity Hub — активности недели
- Digital Twin — обновление профиля
- Proof-of-Impact — метрики достижений

### П4. Milestone Celebration & Reflection

**Назначение:** Празднование достижения вех и рефлексия.

**Этапы:**
1. **Milestone Reached** — обнаружение достижения вехи
2. **Celebration** — поздравление участника (badge, nudge, tokens)
3. **Reflection Prompt** — запрос рефлексии (что получилось, что сложно)
4. **Feedback Collection** — сбор обратной связи о маршруте
5. **Learning Capture** — фиксация lessons learned
6. **Next Milestone Planning** — планирование следующей вехи

**Интеграции:**
- Club — публикация достижения
- Tokenomics — начисление токенов
- Memory Bank — сохранение рефлексии

### П5. Adaptive Intervention (при проблемах)

**Назначение:** Вмешательство при обнаружении проблем (застревание, burnout).

**Триггеры:**
- Длительное отсутствие прогресса (>2 недели)
- Высокий риск burnout
- Частое пропускание рекомендаций
- Негативная обратная связь

**Действия:**
- **Automatic** — автоматическая корректировка (снижение нагрузки, альтернативные пути)
- **Mentor Alert** — уведомление ментора для помощи
- **Conversation** — диалог с участником (что не так?)
- **Replan** — полная перепланировка маршрута

**Интеграции:**
- Digital Twin — мониторинг состояния
- CRM — эскалация к ментору
- AI OS — диалог с участником

---

## Интеграции

### Входящие интеграции

Источники данных для построения маршрутов:

- **Цифровой двойник** — цели, навыки, предпочтения, состояние, история
- **Memory Bank** — методы, практики, руководства
- **Платформа обучения** — доступные курсы и модули
- **Система управления кейсами** — доступные проекты и задачи
- **Клуб** — события, менторы, peer groups
- **Activity Hub** — история активности

### Исходящие интеграции

Использование рекомендаций и обновление систем:

- **AI OS** — генерация планов выполнения
- **Цифровой двойник** — обновление навыков и прогресса
- **Activity Hub** — логирование рекомендаций
- **CRM** — коммуникация с участниками (nudges, alerts)
- **Proof-of-Impact** — данные для расчёта вознаграждений

---

## API и контракты

### Основные эндпоинты

**Path Management:**
```
POST /guide/users/:id/path/initialize      # Создать первый маршрут
GET  /guide/users/:id/path                 # Текущий маршрут
PUT  /guide/users/:id/path                 # Обновить маршрут
GET  /guide/users/:id/path/progress        # Прогресс по маршруту
POST /guide/users/:id/path/replan          # Перепланировать маршрут
```

**Recommendations:**
```
GET  /guide/users/:id/next-action          # Следующее лучшее действие
GET  /guide/users/:id/recommendations      # Топ-N рекомендаций с обоснованием
POST /guide/users/:id/action/feedback      # Обратная связь по действию
GET  /guide/users/:id/nudges               # Активные nudges
```

**Progress Tracking:**
```
GET  /guide/users/:id/milestones           # Вехи и прогресс
POST /guide/users/:id/milestone/complete   # Отметить веху как достигнутую
GET  /guide/users/:id/skill-gaps           # Разрывы в навыках
GET  /guide/users/:id/timeline             # Timeline прогресса
```

**Mentorship:**
```
GET  /guide/users/:id/mentor-matches       # Рекомендации менторов
POST /guide/users/:id/mentor/request       # Запросить ментора
GET  /guide/mentorships/active             # Активные менторства
```

**Analytics:**
```
GET  /guide/users/:id/stats                # Статистика по маршруту
GET  /guide/users/:id/velocity             # Скорость прогресса
GET  /guide/users/:id/blockers             # Текущие блокеры
```

### События

**Path Events:**
- `guide.path.created` — маршрут создан
- `guide.path.updated` — маршрут обновлён
- `guide.path.replanned` — маршрут перепланирован
- `guide.milestone.reached` — веха достигнута

**Recommendation Events:**
- `guide.recommendation.generated` — рекомендация создана
- `guide.recommendation.accepted` — рекомендация принята
- `guide.recommendation.skipped` — рекомендация пропущена
- `guide.recommendation.completed` — рекомендация выполнена

**Intervention Events:**
- `guide.nudge.sent` — nudge отправлен
- `guide.blocker.detected` — блокер обнаружен
- `guide.intervention.triggered` — вмешательство запущено
- `guide.mentor.alerted` — ментор уведомлён

---

## Хранилище данных

### Схема данных

**Таблицы (PostgreSQL):**

```sql
-- Персональные маршруты
CREATE TABLE PersonalPath (
  id UUID PRIMARY KEY,
  user_id UUID NOT NULL,
  status VARCHAR,  -- active, paused, completed
  created_at TIMESTAMP,
  updated_at TIMESTAMP,
  target_skills JSONB,  -- целевые навыки
  timeline JSONB,  -- временные рамки
  metadata JSONB
);

-- Шаги маршрута
CREATE TABLE PathStep (
  id UUID PRIMARY KEY,
  path_id UUID REFERENCES PersonalPath(id),
  step_number INT,
  type VARCHAR,  -- learning, practice, project, social, reflection
  title VARCHAR,
  description TEXT,
  resource_type VARCHAR,  -- course, module, case, event
  resource_id UUID,
  estimated_duration INT,  -- в часах
  prerequisites UUID[],  -- зависимости от других шагов
  status VARCHAR,  -- planned, in_progress, completed, skipped, blocked
  started_at TIMESTAMP,
  completed_at TIMESTAMP
);

-- Вехи
CREATE TABLE Milestone (
  id UUID PRIMARY KEY,
  path_id UUID REFERENCES PersonalPath(id),
  title VARCHAR,
  description TEXT,
  target_date DATE,
  criteria JSONB,  -- критерии достижения
  reached BOOLEAN DEFAULT false,
  reached_at TIMESTAMP
);

-- Рекомендации
CREATE TABLE Recommendation (
  id UUID PRIMARY KEY,
  user_id UUID NOT NULL,
  action_type VARCHAR,
  action_id UUID,  -- ID курса, проекта, etc
  reasoning TEXT,  -- обоснование
  score DECIMAL,  -- оценка релевантности
  generated_at TIMESTAMP,
  shown_at TIMESTAMP,
  accepted BOOLEAN,
  completed BOOLEAN,
  feedback VARCHAR  -- helpful, not_helpful, skipped
);

-- Nudges
CREATE TABLE Nudge (
  id UUID PRIMARY KEY,
  user_id UUID NOT NULL,
  type VARCHAR,  -- reminder, encouragement, warning, etc
  message TEXT,
  channel VARCHAR,  -- email, push, in-app
  scheduled_at TIMESTAMP,
  sent_at TIMESTAMP,
  opened BOOLEAN,
  clicked BOOLEAN
);

-- Блокеры
CREATE TABLE Blocker (
  id UUID PRIMARY KEY,
  path_id UUID REFERENCES PersonalPath(id),
  step_id UUID REFERENCES PathStep(id),
  type VARCHAR,  -- time_constraint, prerequisite, external
  description TEXT,
  detected_at TIMESTAMP,
  resolved BOOLEAN DEFAULT false,
  resolved_at TIMESTAMP
);
```

**Граф (Neo4j):**

```cypher
// Узлы
(:Path {id, user_id, status, created_at})
(:Step {id, title, type, resource_id, status})
(:Milestone {id, title, target_date, reached})
(:Skill {id, name, level_required})
(:Resource {id, type, title})

// Связи
(:Path)-[:HAS_STEP]->(:Step)
(:Path)-[:HAS_MILESTONE]->(:Milestone)
(:Step)-[:REQUIRES]->(:Step)  -- prerequisites
(:Step)-[:TARGETS]->(:Skill)
(:Step)-[:USES]->(:Resource)
(:Milestone)-[:VALIDATES]->(:Skill)
```

### Retention policy

- **Активные маршруты:** Бессрочно
- **Завершённые маршруты:** 2 года
- **Рекомендации:** 6 месяцев
- **Nudges:** 3 месяца
- **Блокеры:** 1 год

---

## Метрики и мониторинг

### Ключевые метрики

| Метрика | Целевое значение | Текущее |
|---------|------------------|---------|
| Path Creation Time | <30 мин | — |
| Path Acceptance Rate | >80% | — |
| Daily Recommendation CTR | >40% | — |
| Weekly Completion Rate | >70% steps | — |
| Milestone Achievement Rate | >80% | — |
| Avg Time to First Milestone | <4 недели | — |
| Blocker Resolution Time (P50) | <48 часов | — |
| Nudge Open Rate | >50% | — |
| Replan Frequency | <1 раз/месяц | — |
| User Satisfaction (NPS) | >50 | — |

### Алерты

**Критические:**
- Recommender engine unavailable
- Path generation failing
- Database connection lost
- No recommendations generated >1 hour

**Предупреждения:**
- High blocker count (>100 active)
- Low recommendation CTR (<20%)
- High replan frequency (>2/month avg)
- Low milestone achievement rate (<60%)
- Nudge delivery delays (>15 min)

---

## Roadmap

### v1.0 (MVP)

- [ ] Базовое построение маршрутов на основе целей и skill gaps
- [ ] Простой recommender (rule-based)
- [ ] Milestone tracking
- [ ] Интеграция с Digital Twin для целей и навыков
- [ ] Интеграция с LMS для курсов
- [ ] Интеграция с Activity Hub для прогресса
- [ ] Timeline визуализация маршрута
- [ ] Базовые nudges (email reminders)

### v1.1

- [ ] ML-powered recommender (collaborative filtering)
- [ ] Adaptive replanning (автоматическая корректировка)
- [ ] Mentor matching algorithm
- [ ] Advanced nudges (оптимизация timing и канала)
- [ ] Blocker detection и intervention
- [ ] Skill radar visualization
- [ ] Weekly review automation
- [ ] Integration с Case Management для проектов

### v2.0

- [ ] Deep learning recommender (персонализация высокого уровня)
- [ ] Predictive path optimization (RL)
- [ ] Multi-modal nudges (voice, video, AR)
- [ ] Peer learning groups (автоматическое формирование)
- [ ] Cross-user path sharing (crowdsourced paths)
- [ ] VR/AR path visualization
- [ ] AI-powered goal setting assistant
- [ ] Federated learning for privacy-preserving recommendations

---

## Связанные документы

- [[Описание ИИ-ассистента Проводник (Ассистент Ученика) 3.2]] — методология и ступени
- [[Концепция использования Проводника (Ассистент Ученика) 3.2]] — пользовательский взгляд (чёрный ящик)
- [[Цифровой двойник 3.2]] — профиль и цели участников
- [[Платформа обучения 3.2]] — курсы и модули для маршрутов
- [[Система управления кейсами 3.2]] — проекты для маршрутов
- [[Клуб 3.2]] — менторство и события
- [[Activity Hub 3.2]] — отслеживание прогресса
- [[Memory Bank 3.2]] — методы и практики
- [[AI OS 3.2]] — выполнение рекомендаций
- [[Proof-of-Impact 3.2]] — метрики достижений

---

## Changelog / История версий

| Дата | Версия | Автор | Изменения |
|------|--------|-------|-----------|
| 2025-12-18 | v1.0 | — | Создан документ, выделен из ИИ-ассистент Проводник 3.2 как взгляд «открытый ящик» |
