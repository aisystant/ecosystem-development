# Сущности и метрики недели

## Основные сущности

### 1. Неделя (Week)

Базовый период анализа. Всегда понедельник-воскресенье.

```json
{
  "week_start": "2025-12-16",
  "week_end": "2025-12-22",
  "twin_id": "user_12345"
}
```

### 2. День с активностью (Active Day)

День, в который зафиксировано хотя бы одно действие.

**Критерии:**
- Минимум 1 действие любого типа
- Действие завершено (не черновик)
- Действие в пределах дня (00:00-23:59)

### 3. Действие (Action)

Атомарная единица активности пользователя.

| Поле | Тип | Описание |
|------|-----|----------|
| `type` | string | reading, practice, writing, discussion |
| `timestamp` | datetime | Время действия |
| `duration_minutes` | number | Продолжительность |
| `result_id` | string? | ID рабочего продукта (если создан) |

### 4. Рабочий продукт (Work Product)

Артефакт, созданный в результате действия.

| Поле | Тип | Описание |
|------|-----|----------|
| `id` | string | Уникальный ID |
| `type` | string | note, post, practice_answer, comment |
| `created_at` | datetime | Время создания |
| `title` | string | Название или первые 50 символов |

## Метрики недели

### Метрика 1: Дни с активностью

```
days_with_activity: 0-7
```

**Формула:** Количество уникальных дней, в которые были действия.

**Интерпретация:**
| Значение | Оценка |
|----------|--------|
| 0 | Неактивная неделя |
| 1-2 | Низкая активность |
| 3-4 | Средняя активность |
| 5-7 | Высокая активность |

### Метрика 2: Инвестированное время

```
total_minutes: number
average_per_day: number
```

**Формула:** Сумма `duration_minutes` всех действий за неделю.

**Интерпретация:**
| Минут/неделя | Оценка |
|--------------|--------|
| 0-30 | Минимальное участие |
| 31-120 | Регулярное участие |
| 121-300 | Активное участие |
| 300+ | Интенсивное участие |

### Метрика 3: Систематичность слота

```
slot_consistency: 0-100 (%)
slot_name: string (например, "утро 7:00-9:00")
```

**Формула:** (Дни с активностью в слоте / Всего дней недели) * 100

**Интерпретация:**
| Процент | Оценка |
|---------|--------|
| 0-20% | Нет привычки |
| 21-50% | Формируется привычка |
| 51-80% | Устойчивая привычка |
| 81-100% | Сильная привычка |

### Метрика 4: Рабочие продукты

```
total_products: number
products_by_type: { note: 2, post: 1, ... }
```

**Формула:** Количество завершённых рабочих продуктов за неделю.

---

**Связанные документы:**
- [[../3.2.4.1.1.4 Контракты-MCP/Контракт_состояние-недели.json]]
- [[../3.2.4.1.1.1. Описание Проводника/Рабочие-продукты-пользователя]]
