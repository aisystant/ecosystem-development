# Структура репозитория руководств

> **Статус:** draft
> **Семейство:** F0 (Управление знаниями)
> **Автор:** Claude
> **Дата:** 2025-12-23
> **Версия:** 0.9

## 0. Назначение документа

Спецификация структуры репозитория для хранения руководств образовательных программ Школы системного менеджмента.

**Потребители:**
- Архитектор (развёртывание)
- ИИ-системы (через MCP-сервер)
- ДЗ-чекер (проверка домашних заданий)
- Авторы руководств (обновление через Markdown)

**Источник названий руководств:** [system-school.ru/#programs](https://system-school.ru/#programs)

---

## 1. Архитектурное решение: иерархическая структура

### 1.1 Ключевые решения

| Вопрос | Решение | Обоснование |
|--------|---------|-------------|
| Структура руководства | **Папка с вложенными подпапками** | Руководство = папка, Раздел = подпапка, Подраздел = подпапка второго уровня |
| Один файл или много? | **Много файлов** (1 подраздел = 1 файл) | Параллельное редактирование, гранулярный доступ MCP |
| Где картинки? | **В `assets/`, встраиваются в текст** | Локальность ссылок, картинка появляется в месте ссылки |
| Где таблицы/кейсы/вопросы? | **Inline или grouped** | Inline — между подразделами в потоке; Grouped — в папках `tables/`, `questions/` |
| Нумерация | **Иерархическая** (P.G.S.SS.T) | Программа.Руководство.Раздел.Подраздел.ТипОбъекта |
| Метаданные | **YAML frontmatter** | Совместимость с существующим репозиторием |
| Методология | **Отдельная папка `_meta/`** | Чёткое разделение контента и мета-инструкций |
| Типы контента | **Полный и краткий** | Поддержка универсального руководства |
| Типы объектов | **Текст, таблицы, кейсы, вопросы, картинки** | Разные рабочие продукты для студента |

### 1.2 Иерархия контента и типы объектов

```
Руководство (папка)
├── Раздел (подпапка)
│   ├── 01-subsection.md           ← ТЕКСТ (подраздел)
│   ├── 02-table.table.yaml        ← ТАБЛИЦА (между подразделами)
│   ├── 03-subsection.md           ← ТЕКСТ (подраздел)
│   ├── 04-case.case.yaml          ← КЕЙС (между подразделами)
│   ├── 05-subsection/             ← Подраздел-папка (второй уровень)
│   │   ├── 01-topic.md            ← ТЕКСТ
│   │   ├── 02-question.question.yaml ← ВОПРОС (внутри подраздела-папки)
│   │   └── 03-topic.md            ← ТЕКСТ
│   ├── tables/                    ← ТАБЛИЦЫ, общие для раздела
│   │   └── *.table.yaml
│   ├── questions/                 ← ВОПРОСЫ, общие для раздела
│   │   └── *.question.yaml
│   └── assets/                    ← Медиа для раздела
├── tables/                        ← Общие ТАБЛИЦЫ руководства
├── questions/                     ← Общие ВОПРОСЫ руководства
└── _meta/                         ← Метаданные руководства
```

#### Два способа размещения объектов

| Способ | Расположение | Когда использовать |
|--------|--------------|-------------------|
| **Inline** | В потоке контента (между подразделами) | Когда объект логически идёт после конкретного текста |
| **Grouped** | В папках `tables/`, `questions/` | Для общих объектов раздела/руководства |

**Inline-размещение:** Таблица, кейс или вопрос размещаются как отдельный файл с порядковым номером в последовательности подразделов. Это позволяет студенту проходить материал в естественном порядке: текст → таблица → текст → кейс.

**Grouped-размещение:** Объекты, относящиеся ко всему разделу или руководству, размещаются в соответствующих папках (`tables/`, `questions/`).

#### Картинки внутри текста

Картинки размещаются в папке `assets/` и встраиваются непосредственно в текст через Markdown:

```markdown
## Применение техники

![Цикл Pomodoro](assets/fig-01-pomodoro.png)
*Рис. 1.1. Цикл работы по методу Pomodoro*

Как показано на рисунке выше, каждый цикл состоит из...
```

Картинка появляется в том месте текста, где размещена ссылка — это позволяет иллюстрировать конкретные концепции.

#### Типы объектов в разделе

Внутри каждого раздела, подраздела или подподраздела могут встречаться все эти типы объектов (inline или grouped):

| Тип | Суффикс файла | Назначение | Пример |
|-----|---------------|------------|--------|
| **Текст** | `.md` | Инструкция для изучения и заполнения таблиц | `01-pomodoro.md` |
| **Таблица** | `.table.yaml` | Шаблон таблицы моделирования | `attention-log.table.yaml` |
| **Кейс** | `.case.yaml` | Кейс с выбором правильного ответа из нескольких | `case-01.case.yaml` |
| **Вопрос** | `.question.yaml` | Вопрос, где нужно написать ответ в ячейке | `reflection-01.question.yaml` |
| **Картинка** | `.png`, `.jpg`, `.svg` | Иллюстрации к материалу | `fig-01-pomodoro.png` |
| **Рубрика** | `.rubric.yaml` | Критерии оценки для ДЗ-чекера | `quality.rubric.yaml` |

### 1.3 Принцип: Guide = Unit of Deployment

Каждое руководство — **самодостаточный пакет** со всеми типами объектов:

```
1.1-self-development/                  ← РУКОВОДСТВО (код 1.1)
├── index.md                           ← Оглавление + метаданные
├── 01-attention/                      ← РАЗДЕЛ 01 (код 1.1.01)
│   ├── 01-pomodoro.md                 ← ТЕКСТ: Подраздел 01 (код 1.1.01.01)
│   ├── 02-attention-log.table.yaml    ← ТАБЛИЦА inline (после pomodoro)
│   ├── 03-focus.md                    ← ТЕКСТ: Подраздел 02 (код 1.1.01.03)
│   ├── 04-interruptions.case.yaml     ← КЕЙС inline (после focus)
│   ├── 05-techniques/                 ← Подраздел-папка (код 1.1.01.05)
│   │   ├── 01-timeboxing.md           ← ТЕКСТ: Подподраздел 01
│   │   ├── 02-practice.question.yaml  ← ВОПРОС inline (внутри папки)
│   │   └── 03-batching.md             ← ТЕКСТ: Подподраздел 02
│   ├── tables/                        ← ТАБЛИЦЫ, общие для раздела
│   │   └── 01-focus-tracker.table.yaml     ← T.1.1.01.G01 (grouped)
│   ├── questions/                     ← ВОПРОСЫ, общие для раздела
│   │   └── 01-reflection.question.yaml     ← Q.1.1.01.G01 (grouped)
│   └── assets/                        ← Медиа для раздела
│       └── fig-01-pomodoro.png        ← Картинка (встраивается в текст)
├── 02-planning/                       ← РАЗДЕЛ 02 (код 1.1.02)
│   ├── 01-daily.md                    ← ТЕКСТ
│   ├── 02-daily-plan.table.yaml       ← ТАБЛИЦА inline
│   ├── 03-weekly.md                   ← ТЕКСТ
│   ├── 04-planning-case.case.yaml     ← КЕЙС inline
│   ├── tables/
│   │   └── 01-weekly-plan.table.yaml       ← T.1.1.02.G01 (grouped)
│   └── questions/
│       └── 01-reflection.question.yaml     ← Q.1.1.02.G01 (grouped)
├── tables/                            ← Общие ТАБЛИЦЫ руководства
│   └── 01-target-system.table.yaml         ← T.1.1.00.01
├── questions/                         ← Общие ВОПРОСЫ руководства
│   └── 01-final-reflection.question.yaml   ← Q.1.1.00.01
├── assets/                            ← Общие медиа руководства
└── _check/                            ← Рубрики для ДЗ-чекера
    └── rubrics.yaml
```

**Порядок прохождения студентом:** Файлы сортируются по номеру, поэтому студент проходит:
`01-pomodoro.md` → `02-attention-log.table.yaml` → `03-focus.md` → `04-interruptions.case.yaml` → ...

#### Правила нумерации объектов

**Inline-объекты** (в потоке контента) нумеруются как подразделы:

| Тип объекта | Суффикс файла | Формат кода | Пример файла |
|-------------|---------------|-------------|--------------|
| Текст | `.md` | P.G.SS.NN | `01-pomodoro.md` (1.1.01.01) |
| Таблица inline | `.table.yaml` | P.G.SS.NN | `02-attention-log.table.yaml` (1.1.01.02) |
| Кейс inline | `.case.yaml` | P.G.SS.NN | `04-interruptions.case.yaml` (1.1.01.04) |
| Вопрос inline | `.question.yaml` | P.G.SS.NN | `05-practice.question.yaml` (1.1.01.05) |

**Grouped-объекты** (в папках `tables/`, `questions/`) имеют префикс типа:

| Тип объекта | Префикс | Формат кода | Пример |
|-------------|---------|-------------|--------|
| Таблица grouped | `T.` | T.P.G.SS.GNN | `T.1.1.01.G01` |
| Кейс grouped | `C.` | C.P.G.SS.GNN | `C.1.1.01.G01` |
| Вопрос grouped | `Q.` | Q.P.G.SS.GNN | `Q.1.1.01.G01` |
| Картинка | `I.` | I.P.G.SS.NN | `I.1.1.01.01` |
| Рубрика | `R.` | R.P.G.SS.NN | `R.1.1.01.01` |

**Где:**
- P = Программа (1-3)
- G = Руководство (1-9)
- SS = Раздел (00 = общие для руководства, 01-99 = разделы)
- NN = Порядковый номер в потоке контента (01-99) — для inline
- GNN = Порядковый номер в группе (G01-G99) — для grouped

#### Пример полного ID объекта

Допустим, в программе **"Личное развитие"** (P=1), в руководстве **"Системное саморазвитие"** (G=1), в **разделе 2** "Планирование" (SS=02), на **позиции 5** в потоке контента (NN=05) находится **вопрос**.

| Размещение | Физический путь | Уникальный ID |
|------------|-----------------|---------------|
| **Inline** (в потоке) | `1.1-self-development/02-planning/05-reflection.question.yaml` | `Q.1.1.02.05` |
| **Grouped** (в папке) | `1.1-self-development/02-planning/questions/05-reflection.question.yaml` | `Q.1.1.02.G05` |

**Расшифровка ID `Q.1.1.02.05`:**
- `Q` — тип объекта (Question/Вопрос)
- `1` — программа "Личное развитие"
- `1` — руководство "Системное саморазвитие"
- `02` — раздел "Планирование"
- `05` — порядковый номер в потоке контента

Этот ID уникален во всём репозитории и используется для ссылок, MCP-запросов и ДЗ-чекера.

#### Пример структуры реального раздела

Рассмотрим реальный пример из руководства "Системное саморазвитие":

```
programs/1-personal/
└── 1.1-self-development/                          ← Руководство "Системное саморазвитие"
    ├── index.md
    │
    ├── 01-about/                                  ← Раздел 1: "О руководстве"
    │   ├── 01-intro.md                            ← Текст (1.1.01.01)
    │   ├── 02-preparation.question.yaml           ← Вопрос (Q.1.1.01.02)
    │   └── assets/
    │
    ├── 02-physical-mental/                        ← Раздел 2: "Физический мир и ментальное пространство"
    │   │
    │   ├── 01-mental-space/                       ← Подраздел-ПАПКА: "Что такое ментальное пространство"
    │   │   ├── 01-human-development.md            ← Подподраздел 1: "Как человеку удалось..." (1.1.02.01.01)
    │   │   ├── 02-topic-two.md                    ← Подподраздел 2 (1.1.02.01.02)
    │   │   ├── 03-topic-three.md                  ← Подподраздел 3 (1.1.02.01.03)
    │   │   ├── 04-topic-four.md                   ← Подподраздел 4 (1.1.02.01.04)
    │   │   ├── 05-concepts.table.yaml             ← ТАБЛИЦА "Моделирование: понятия" (T.1.1.02.01.05)
    │   │   └── 06-summary.md                      ← Подподраздел "Саммари раздела" (1.1.02.01.06)
    │   │
    │   └── assets/
    │
    ├── tables/                                    ← Общие таблицы руководства
    ├── questions/                                 ← Общие вопросы руководства
    └── _check/
```

**Ключевой принцип:** Все объекты (тексты, вопросы, таблицы) нумеруются **последовательно** внутри своей папки — так обеспечивается порядок прохождения.

**Порядок прохождения студентом подраздела "Что такое ментальное пространство":**

| № | Файл | Тип | Логический ID |
|---|------|-----|---------------|
| 01 | `01-human-development.md` | текст | `1.1.02.01.01` |
| 02 | `02-topic-two.md` | текст | `1.1.02.01.02` |
| 03 | `03-topic-three.md` | текст | `1.1.02.01.03` |
| 04 | `04-topic-four.md` | текст | `1.1.02.01.04` |
| 05 | `05-concepts.table.yaml` | таблица | `T.1.1.02.01.05` |
| 06 | `06-summary.md` | текст | `1.1.02.01.06` |

**Порядок прохождения раздела "О руководстве":**

| № | Файл | Тип | Логический ID |
|---|------|-----|---------------|
| 01 | `01-intro.md` | текст | `1.1.01.01` |
| 02 | `02-preparation.question.yaml` | вопрос | `Q.1.1.01.02` |

### 1.4 SoTA-практики именования файлов

**Источники:** [MkDocs](https://www.mkdocs.org/user-guide/writing-your-docs/), [Docusaurus](https://docusaurus.io/docs/next/sidebar/autogenerated), [Harvard Data Management](https://datamanagement.hms.harvard.edu/plan-design/file-naming-conventions)

#### Два типа нумерации

| Тип | Назначение | Формат | Пример |
|-----|------------|--------|--------|
| **Физическая** | Сортировка файлов в ФС | Zero-padded префикс | `01-attention/`, `02-planning/` |
| **Логическая** | Ссылки, идентификаторы | Иерархия P.G.S.SS | `1.1.01.02` |

#### Правила физического именования (для сортировки)

1. **Zero-padding:** Всегда 2 цифры (01-99) для гарантии алфавитной сортировки
   - ✅ `01, 02, 03... 10, 11... 99`
   - ❌ `1, 2, 3... 10, 11` (10 встанет между 1 и 2)

2. **Разделитель:** Дефис `-` между номером и slug
   - ✅ `01-attention`
   - ❌ `01_attention`, `01.attention`

3. **Slug:** kebab-case, латиница, без спецсимволов
   - ✅ `self-development`, `systems-thinking`
   - ❌ `Self_Development`, `системное-мышление`

4. **Локальная нумерация:** Каждый уровень нумеруется с 01 внутри своей папки

5. **Inline-объекты:** Таблицы, кейсы и вопросы между подразделами получают порядковый номер в общей последовательности:
   - ✅ `01-pomodoro.md`, `02-attention-log.table.yaml`, `03-focus.md`
   - ❌ `01-pomodoro.md`, `01-attention-log.table.yaml` (дублирование номера)

#### Соответствие физического и логического кода

```
Физический путь                                   Логический код   Тип
────────────────────────────────────────────────  ───────────────  ────────
programs/1-personal/                              1
  └─ 1.1-self-development/                        1.1
       ├─ 01-attention/                           1.1.01           раздел
       │    ├─ 01-pomodoro.md                     1.1.01.01        текст
       │    ├─ 02-attention-log.table.yaml        1.1.01.02        таблица inline
       │    ├─ 03-focus.md                        1.1.01.03        текст
       │    ├─ 04-interruptions.case.yaml         1.1.01.04        кейс inline
       │    ├─ 05-techniques/                     1.1.01.05        папка
       │    │    ├─ 01-timeboxing.md              1.1.01.05.01     текст
       │    │    ├─ 02-practice.question.yaml     1.1.01.05.02     вопрос inline
       │    │    └─ 03-batching.md                1.1.01.05.03     текст
       │    ├─ tables/                            —                grouped
       │    │    └─ 01-focus-tracker.table.yaml   T.1.1.01.G01     таблица grouped
       │    └─ questions/                         —                grouped
       │         └─ 01-reflection.question.yaml   Q.1.1.01.G01     вопрос grouped
       └─ 02-planning/                            1.1.02           раздел
            ├─ 01-daily.md                        1.1.02.01        текст
            ├─ 02-daily-plan.table.yaml           1.1.02.02        таблица inline
            └─ 03-weekly.md                       1.1.02.03        текст
```

### 1.5 Типы материалов в руководствах

| Тип | Описание | Применение |
|-----|----------|------------|
| **Полный текст** | Развёрнутое изложение подраздела | Основные руководства |
| **Краткий (concepts)** | Список понятий и ключевых идей | Универсальное руководство, справочники |
| **Смешанный** | Ключевые понятия + выборочные пояснения | Обзорные руководства |

**Краткие материалы** могут содержать:
- Список понятий с определениями
- Ключевые идеи и принципы
- Ссылки на полные материалы
- Контрольные вопросы

Из кратких материалов формируется **универсальное руководство** — сводный справочник понятий и идей.

### 1.6 Рабочие продукты репозитория

Репозиторий обеспечивает выдачу следующих **рабочих продуктов** через MCP-сервер:

| Рабочий продукт | Описание | Интерфейсы выдачи |
|-----------------|----------|-------------------|
| **Текст для изучения сегодня** | Один подраздел руководства (daily learning) | LMS, Apps SDK, Telegram-бот |
| **Отдельная таблица моделирования** | Шаблон таблицы + инструкция по заполнению | Coda, NocoDB, Notion, CSV |
| **Текст раздела/руководства** | Полный текст раздела или всего руководства | LMS, PDF, Markdown |
| **Набор таблиц по проекту** | Несколько связанных таблиц (возможно из разных руководств) | Coda Doc, NocoDB Base |
| **Кейсы** | Задания с выбором правильного ответа из нескольких вариантов | LMS, Apps SDK, Telegram-бот |
| **Ответы на вопросы** | Текстовые ответы студента на вопросы руководства | LMS, ДЗ-чекер |
| **Рабочая тетрадь** | Все таблицы + ответы на вопросы + результаты кейсов по руководству | Coda Doc, PDF, JSON |

#### Схема потоков рабочих продуктов

```
┌───────────────────────────────────────────────────────────────────────────────────────┐
│                               РЕПОЗИТОРИЙ РУКОВОДСТВ                                   │
│  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐  │
│  │ Текст  │  │Таблицы │  │ Кейсы  │  │Вопросы │  │Картинки│  │Рубрики │  │Тетради │  │
│  │разделов│  │ (YAML) │  │ (YAML) │  │ (YAML) │  │ (IMG)  │  │ (YAML) │  │ (YAML) │  │
│  └───┬────┘  └───┬────┘  └───┬────┘  └───┬────┘  └───┬────┘  └───┬────┘  └───┬────┘  │
└──────┼───────────┼───────────┼───────────┼───────────┼───────────┼───────────┼────────┘
        │           │           │           │           │           │           │
        └───────────┴───────────┴───────────┼───────────┴───────────┴───────────┘
                                            │
                                    ┌───────▼───────┐
                                    │  MCP-СЕРВЕР   │
                                    └───────┬───────┘
                                            │
               ┌────────────────────────────┼────────────────────────────┐
               │                            │                            │
               ▼                            ▼                            ▼
       ┌───────────────┐            ┌───────────────┐            ┌───────────────┐
       │     LMS       │            │   МОДЕЛЕРЫ   │            │   ДЗ-ЧЕКЕР   │
       │  Apps SDK     │            │  Coda/NocoDB  │            │              │
       │  Telegram     │            │    Notion     │            │  Валидация   │
       └───────────────┘            └───────────────┘            └───────────────┘
               │                            │                            │
               ▼                            ▼                            ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              РАБОЧАЯ ТЕТРАДЬ СТУДЕНТА                                │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌───────────────────────────┐   │
│  │ Изученные   │  │ Заполненные │  │ Результаты  │  │ Ответы на вопросы         │   │
│  │ разделы     │  │ таблицы     │  │ кейсов      │  │ (проверенные)             │   │
│  └─────────────┘  └─────────────┘  └─────────────┘  └───────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

### 1.7 Таблицы моделирования

#### Концепция

Каждое руководство содержит **задания на моделирование** в виде таблиц. Студент заполняет таблицы на материале своего рабочего проекта.

**Важно:** Текст раздела руководства (`.md`) **является инструкцией** по заполнению связанных таблиц. Отдельного документа-инструкции не существует — студент изучает раздел и заполняет таблицу по прочитанному.

```
┌─────────────────────────────────────────────────────────────────┐
│  ТЕКСТ РАЗДЕЛА (.md)                                            │
│  = Инструкция по заполнению таблиц раздела                      │
│  = Теория, примеры, критерии качества                           │
├─────────────────────────────────────────────────────────────────┤
│  ШАБЛОН ТАБЛИЦЫ (.table.yaml)                                   │
│  = Структура, колонки, валидация — хранится в репозитории       │
├─────────────────────────────────────────────────────────────────┤
│  ЗАПОЛНЕННАЯ ТАБЛИЦА (student work)                             │
│  = Данные студента — внешние моделеры/хранилища                 │
└─────────────────────────────────────────────────────────────────┘
```

#### Связь текста и таблиц

| Компонент | Где хранится | Назначение |
|-----------|--------------|------------|
| Текст раздела | `01-attention/01-pomodoro.md` | Инструкция: что, зачем, как заполнять |
| Шаблон таблицы | `01-attention/tables/01-attention-log.table.yaml` | Структура: колонки, типы, валидация |
| Заполненная таблица | Coda / NocoDB / Notion | Данные студента по его проекту |

#### Формат описания таблицы (`*.table.yaml`)

```yaml
# 01-systems/tables/target-system.table.yaml
---
id: T.TargetSystem
title: "Целевая система"
guide_ref: "1.1.01.01"                    # Ссылка на инструкцию
section: "01-systems"

# Метаданные для ДЗ-чекера
homework:
  hw_num: 1
  criteria:
    - "Названа конкретная система"
    - "Указана надсистема"
    - "Определены границы"

# Структура таблицы
schema:
  columns:
    - name: "system_name"
      title: "Название системы"
      type: "string"
      required: true
      hint: "Что именно вы создаёте/улучшаете?"

    - name: "supersystem"
      title: "Надсистема"
      type: "string"
      required: true
      hint: "Частью чего является ваша система?"

    - name: "boundary"
      title: "Граница"
      type: "text"
      required: false
      hint: "Где заканчивается ваша система?"

# Примеры заполнения
examples:
  - system_name: "Мобильное приложение"
    supersystem: "Платформа доставки еды"
    boundary: "От UI до API-запросов"

# Связи с другими таблицами
relations:
  - table: "T.Stakeholders"
    type: "one-to-many"
    foreign_key: "system_id"

# Экспорт в моделеры
export:
  formats: ["csv", "json", "markdown", "coda", "nocodb"]
```

### 1.8 Вопросы и кейсы

Вопросы — это задания, требующие текстового ответа или анализа кейса.

#### Формат описания вопроса (`*.question.yaml`)

```yaml
# 01-attention/questions/01-interruptions.question.yaml
---
id: Q.1.1.01.01
title: "Анализ прерываний"
type: case                            # case | open | reflection | multiple_choice
text_ref: "1.1.01.01"                 # Ссылка на текст-инструкцию

# Формулировка
prompt: |
  Проанализируйте свой рабочий день вчера.
  Сколько раз вас прерывали? Какие паттерны прерываний вы заметили?

# Контекст для студента
context:
  estimated_time: 15                  # минут
  difficulty: beginner
  requires_project: true              # Нужен рабочий проект

# Для ДЗ-чекера
homework:
  hw_num: 1
  criteria:
    - "Указано количество прерываний"
    - "Описаны типы прерываний"
    - "Выявлены закономерности"
  rubric_ref: "R.1.1.01.01"

# Примеры хороших ответов (для ДЗ-чекера)
examples:
  - answer: "За день было 12 прерываний: 5 от коллег, 4 от мессенджеров..."
    score: 3
    feedback: "Отличный анализ с категоризацией"
```

#### Типы вопросов

| Тип | Назначение | Пример |
|-----|------------|--------|
| `case` | Анализ ситуации из проекта | "Опишите прерывания в вашем проекте" |
| `open` | Открытый вопрос на понимание | "Что такое целевая система?" |
| `reflection` | Рефлексия по пройденному | "Что было самым сложным в разделе?" |
| `multiple_choice` | Тест с вариантами | "Выберите правильное определение" |

### 1.9 Рабочие тетради

#### Концепция

**Рабочая тетрадь** — это набор связанных таблиц моделирования и ответов на вопросы, объединённых для работы над проектом.

| Тип тетради | Содержимое | Пример |
|-------------|------------|--------|
| **По руководству** | Все таблицы одного руководства | Тетрадь по "Системное мышление" |
| **По проекту** | Таблицы из разных руководств для одного проекта | "Мой стартап" |
| **По программе** | Все таблицы программы | Тетрадь "Личное развитие" |

#### Формат манифеста тетради (`workbook.yaml`)

```yaml
# _meta/tables/workbooks/personal-project.yaml
---
id: WB.PersonalProject
title: "Рабочая тетрадь: Личный проект"
description: "Системное моделирование вашего рабочего проекта"
program: "1-personal"

# Секции тетради (группировка таблиц)
sections:
  - name: "Определение системы"
    tables:
      - id: "T.TargetSystem"
        order: 1
        required: true
      - id: "T.Stakeholders"
        order: 2
        required: true
        depends_on: ["T.TargetSystem"]
    guide_sections: ["1.1.01", "1.1.02"]

  - name: "Структура системы"
    tables:
      - id: "T.SystemLevels"
        order: 3
        required: true
      - id: "T.Breakdown"
        order: 4
        required: false
    guide_sections: ["1.1.03", "1.1.04"]

# Вопросы (не табличные задания)
questions:
  - section: "Определение системы"
    questions_ref: "_check/hw-01.md"
  - section: "Структура системы"
    questions_ref: "_check/hw-02.md"

# Экспорт всей тетради
export:
  formats: ["pdf", "coda-doc", "nocodb-base", "notion", "json"]
```

#### Workflow работы с рабочей тетрадью

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        ЦИКЛ РАБОТЫ СТУДЕНТА                             │
└─────────────────────────────────────────────────────────────────────────┘

     ┌──────────────┐
     │  1. ИЗУЧЕНИЕ │
     │  Читает текст│◀─────────────────────────────────────────────────┐
     │  раздела     │                                                   │
     └──────┬───────┘                                                   │
            │                                                           │
            ▼                                                           │
     ┌──────────────┐                                                   │
     │2. МОДЕЛИРОВ. │     ┌──────────────┐                              │
     │ Заполняет    │────▶│  Моделер     │                              │
     │ таблицу      │     │ (Coda/NocoDB)│                              │
     └──────┬───────┘     └──────┬───────┘                              │
            │                    │                                      │
            ▼                    ▼                                      │
     ┌──────────────┐     ┌──────────────┐                              │
     │ 3. ВОПРОСЫ   │     │  Сохранение  │                              │
     │ Отвечает на  │     │  в тетрадь   │                              │
     │ вопросы      │     └──────────────┘                              │
     └──────┬───────┘                                                   │
            │                                                           │
            ▼                                                           │
     ┌──────────────┐     ┌──────────────┐     ┌──────────────┐         │
     │ 4. ПРОВЕРКА  │────▶│  ДЗ-чекер    │────▶│ 5. НАСТАВНИК │         │
     │ Отправляет   │     │  (ИИ-авто-   │     │ (человек)    │         │
     │ на проверку  │     │   валидация) │     │ Проверяет    │         │
     └──────────────┘     └──────────────┘     │ сложные ДЗ   │         │
                                               └──────┬───────┘         │
                                                      │                 │
                                                      ▼                 │
                                               ┌──────────────┐         │
                                               │ 6. ОБРАТНАЯ  │─────────┘
                                               │    СВЯЗЬ     │
                                               │ Корректировка│
                                               │ или зачёт    │
                                               └──────────────┘
```

**Роли в проверке:**

| Этап | Исполнитель | Функция |
|------|-------------|---------|
| ДЗ-чекер | ИИ-агент | Автоматическая валидация: структура, полнота, базовые критерии |
| Наставник | Человек | Проверка сложных заданий, содержательная обратная связь, зачёт |

#### Объединение таблиц из разных руководств

Для работы над проектом можно создать **кросс-руководственную тетрадь**:

```yaml
# workbooks/my-startup.yaml
---
id: WB.MyStartup
title: "Мой стартап"
type: "cross-guide"                       # Таблицы из разных руководств

tables_from_guides:
  - guide: "2.2-systems-thinking"
    tables: ["T.TargetSystem", "T.Stakeholders", "T.SystemLevels"]

  - guide: "2.3-methodology"
    tables: ["T.Practices", "T.Methods"]

  - guide: "2.6-systems-management"
    tables: ["T.Roles", "T.WorkBreakdown"]

# Связи между таблицами разных руководств
cross_relations:
  - from: "T.TargetSystem.id"
    to: "T.Roles.system_id"
  - from: "T.Stakeholders.id"
    to: "T.Roles.stakeholder_id"
```

---

## 2. Полная структура репозитория

### 2.1 Руководства из программ ШСМ

Названия руководств взяты из [system-school.ru](https://system-school.ru/#programs):

| Программа | Руководства |
|-----------|-------------|
| **1. Личное развитие** | Системное саморазвитие, Практики саморазвития, Введение в системное мышление, Системный фитнес |
| **2. Рабочее развитие** | Рациональная работа, Системное мышление, Методология, Системная инженерия, Инженерия личности, Системный менеджмент |
| **3. Исследовательское развитие** | Интеллект-стек |

### 2.2 Структура репозитория

```
guides-repo/
│
├── README.md                              ← Описание репозитория
├── STRUCTURE.md                           ← Этот документ
├── manifest.json                          ← Машиночитаемый манифест для MCP
│
├── _meta/                                 ← МЕТОДОЛОГИЯ (для ИИ-генерации)
│   ├── glossary.md                        ← Общий глоссарий терминов
│   ├── concepts/                          ← Базовые понятия
│   │   ├── index.md
│   │   ├── systems-thinking.md
│   │   ├── roles-model.md
│   │   └── ...
│   ├── templates/                         ← Шаблоны документов
│   │   ├── guide-template.md
│   │   ├── section-template.md
│   │   ├── subsection-template.md
│   │   ├── concepts-template.md           ← Шаблон кратких материалов
│   │   ├── table-template.yaml            ← Шаблон таблицы моделирования
│   │   ├── question-template.yaml         ← Шаблон вопроса/кейса
│   │   ├── rubric-template.yaml           ← Шаблон рубрики оценки
│   │   └── workbook-template.yaml         ← Шаблон рабочей тетради
│   ├── rubrics/                           ← Общие рубрики оценки
│   │   ├── text-quality.md
│   │   ├── systems-analysis.md
│   │   └── ...
│   ├── tables/                            ← ТАБЛИЦЫ МОДЕЛИРОВАНИЯ
│   │   ├── schemas/                       ← JSON Schema для валидации
│   │   │   ├── target-system.schema.json
│   │   │   ├── stakeholders.schema.json
│   │   │   └── ...
│   │   └── workbooks/                     ← Манифесты рабочих тетрадей
│   │       ├── personal-project.yaml
│   │       ├── team-project.yaml
│   │       └── ...
│   └── generation-rules.md                ← Правила генерации ИИ
│
├── programs/                              ← ТРИ ПРОГРАММЫ ШСМ
│   │
│   ├── 1-personal/                        ← Личное развитие
│   │   ├── program.md                     ← Описание программы
│   │   ├── roadmap.md                     ← Маршрут прохождения
│   │   │
│   │   ├── 1.1-self-development/          ← РУКОВОДСТВО: Системное саморазвитие (1.1)
│   │   │   ├── index.md                   ← Оглавление + метаданные
│   │   │   │
│   │   │   ├── 01-attention/              ← РАЗДЕЛ: Внимание (1.1.01)
│   │   │   │   ├── 01-pomodoro.md         ← ТЕКСТ: Подраздел (1.1.01.01)
│   │   │   │   ├── 02-focus.md            ← ТЕКСТ: Подраздел (1.1.01.02)
│   │   │   │   ├── 03-techniques/         ← ТЕКСТ: Подраздел-папка (1.1.01.03)
│   │   │   │   │   ├── 01-timeboxing.md   ← ТЕКСТ: Подподраздел
│   │   │   │   │   └── 02-batching.md     ← ТЕКСТ: Подподраздел
│   │   │   │   ├── tables/                ← ТАБЛИЦЫ раздела
│   │   │   │   │   ├── 01-attention-log.table.yaml    ← T.1.1.01.01
│   │   │   │   │   └── 02-focus-tracker.table.yaml    ← T.1.1.01.02
│   │   │   │   ├── questions/             ← ВОПРОСЫ раздела
│   │   │   │   │   ├── 01-interruptions.question.yaml ← Q.1.1.01.01
│   │   │   │   │   └── 02-reflection.question.yaml    ← Q.1.1.01.02
│   │   │   │   └── assets/
│   │   │   │
│   │   │   ├── 02-planning/               ← РАЗДЕЛ: Планирование (1.1.02)
│   │   │   │   ├── 01-daily.md            ← ТЕКСТ
│   │   │   │   ├── 02-weekly.md           ← ТЕКСТ
│   │   │   │   ├── tables/                ← ТАБЛИЦЫ раздела
│   │   │   │   │   ├── 01-daily-plan.table.yaml       ← T.1.1.02.01
│   │   │   │   │   └── 02-weekly-plan.table.yaml      ← T.1.1.02.02
│   │   │   │   ├── questions/             ← ВОПРОСЫ раздела
│   │   │   │   │   └── 01-planning-case.question.yaml ← Q.1.1.02.01
│   │   │   │   └── ...
│   │   │   │
│   │   │   ├── tables/                    ← ОБЩИЕ ТАБЛИЦЫ руководства (SS=00)
│   │   │   │   ├── 01-target-system.table.yaml        ← T.1.1.00.01
│   │   │   │   └── ...
│   │   │   ├── questions/                 ← ОБЩИЕ ВОПРОСЫ руководства
│   │   │   │   └── 01-final.question.yaml             ← Q.1.1.00.01
│   │   │   ├── assets/                    ← Общие медиа руководства
│   │   │   └── _check/                    ← РУБРИКИ для ДЗ-чекера
│   │   │       ├── 01-attention.rubric.yaml           ← R.1.1.01.01
│   │   │       └── 02-planning.rubric.yaml            ← R.1.1.02.01
│   │   │
│   │   ├── 1.2-practices/                 ← РУКОВОДСТВО: Практики саморазвития
│   │   │   └── ... (аналогичная структура)
│   │   │
│   │   ├── 1.3-intro-systems/             ← РУКОВОДСТВО: Введение в системное мышление
│   │   │   └── ...
│   │   │
│   │   └── 1.4-fitness/                   ← РУКОВОДСТВО: Системный фитнес
│   │       └── ...
│   │
│   ├── 2-work/                            ← Рабочее развитие
│   │   ├── program.md
│   │   ├── roadmap.md
│   │   ├── 2.1-rational-work/             ← РУКОВОДСТВО: Рациональная работа
│   │   ├── 2.2-systems-thinking/          ← РУКОВОДСТВО: Системное мышление
│   │   ├── 2.3-methodology/               ← РУКОВОДСТВО: Методология
│   │   ├── 2.4-systems-engineering/       ← РУКОВОДСТВО: Системная инженерия
│   │   ├── 2.5-personality-engineering/   ← РУКОВОДСТВО: Инженерия личности
│   │   └── 2.6-systems-management/        ← РУКОВОДСТВО: Системный менеджмент
│   │
│   └── 3-research/                        ← Исследовательское развитие
│       ├── program.md
│       ├── roadmap.md
│       └── 3.1-intellect-stack/           ← РУКОВОДСТВО: Интеллект-стек
│
└── .mcp/                                  ← Конфигурация MCP-сервера
    ├── config.yaml
    ├── endpoints.yaml
    ├── access-policies.yaml
    └── hw-checker-config.yaml             ← Конфигурация ДЗ-чекера
```

---

## 3. Форматы файлов

### 3.1 Манифест репозитория (`manifest.json`)

```json
{
  "version": "1.0",
  "updated": "2025-12-23",
  "programs": [
    {
      "id": "personal",
      "code": "C.Program.PersonalDevelopment",
      "title": "Личное развитие",
      "path": "programs/1-personal",
      "guides": [
        {"code": "1.1", "slug": "self-development", "title": "Системное саморазвитие"},
        {"code": "1.2", "slug": "practices", "title": "Практики саморазвития"},
        {"code": "1.3", "slug": "intro-systems", "title": "Введение в системное мышление"},
        {"code": "1.4", "slug": "fitness", "title": "Системный фитнес"}
      ]
    },
    {
      "id": "work",
      "code": "C.Program.WorkDevelopment",
      "title": "Рабочее развитие",
      "path": "programs/2-work",
      "guides": [
        {"code": "2.1", "slug": "rational-work", "title": "Рациональная работа"},
        {"code": "2.2", "slug": "systems-thinking", "title": "Системное мышление"},
        {"code": "2.3", "slug": "methodology", "title": "Методология"},
        {"code": "2.4", "slug": "systems-engineering", "title": "Системная инженерия"},
        {"code": "2.5", "slug": "personality-engineering", "title": "Инженерия личности"},
        {"code": "2.6", "slug": "systems-management", "title": "Системный менеджмент"}
      ]
    },
    {
      "id": "research",
      "code": "C.Program.ResearchDevelopment",
      "title": "Исследовательское развитие",
      "path": "programs/3-research",
      "guides": [
        {"code": "3.1", "slug": "intellect-stack", "title": "Интеллект-стек"}
      ]
    }
  ],
  "meta": {
    "glossary": "_meta/glossary.md",
    "templates": "_meta/templates/",
    "rubrics": "_meta/rubrics/"
  }
}
```

### 3.2 Программа (`program.md`)

```yaml
---
id: C.Program.PersonalDevelopment
title: Личное развитие
status: active
version: 1.0
target_role: R.Student
outcome_role: R.Intellectual
guides_count: 3
estimated_hours: 120
---

# Личное развитие

## Цель программы
Развитие базовых практик интеллекта...

## Целевые результаты
- [ ] Освоено системное мышление
- [ ] Настроен экзокортекс
- [ ] ...

## Руководства программы
| № | Руководство | Часы | Статус |
|---|-------------|------|--------|
| 1.1 | Системное мышление | 40 | active |
| 1.2 | Управление временем | 30 | active |
| 1.3 | Ведение заметок | 50 | draft |
```

### 3.3 Индекс руководства (`index.md`)

```yaml
---
id: C.Guide.SelfDevelopment
program: C.Program.PersonalDevelopment
code: "1.1"
title: Системное саморазвитие
status: active
version: 2.3
created: 2024-01-15
modified: 2025-12-20

# FPF метаданные
family: F5
cell: "2.2.3"
trust:
  F: 8
  G: domain
  R: 0.9

# Структура (иерархическая)
structure:
  sections_count: 5           # Количество разделов (папок первого уровня)
  subsections_count: 24       # Общее количество подразделов
  content_type: full          # full | concepts | mixed

estimated_hours: 40
prerequisites: []
unlocks: ["1.2-practices"]

# Для ДЗ-чекера
homework:
  count: 8
  questions_file: "_check/questions.md"
  rubrics_file: "_check/rubrics.md"
  answers_key: "_check/answers-key.md"  # опционально

# Авторство
author: "Иванов И.И."
maintainers: ["Петров П.П."]
---

# Системное саморазвитие

## Аннотация
Руководство по освоению практик системного саморазвития...

## Структура руководства

> **Машинная обработка:** Структура хранится в `index.yaml` (см. раздел 3.4).
> Этот раздел — человекочитаемое оглавление, генерируемое из `index.yaml`.

### Оглавление

1. **Внимание** (`01-attention/`)
   - 1.1 Техника Pomodoro
   - 1.2 Фокусировка
   - 1.3 Техники управления
     - 1.3.1 Timeboxing
     - 1.3.2 Batching
2. **Планирование** (`02-planning/`)
   - 2.1 Ежедневное планирование
   - 2.2 Недельное планирование
3. ...

## Домашние задания
| ДЗ | Раздел | Тип | Файл вопросов |
|----|--------|-----|---------------|
| ДЗ-1 | 1-2 | text | _check/hw-01.md |
| ДЗ-2 | 3 | table | _check/hw-02.md |
| ... | ... | ... | ... |
```

### 3.4 Индекс структуры руководства (`index.yaml`)

Машиночитаемая структура руководства хранится в `index.yaml` рядом с `index.md`.

**Преимущества:**
- Один файл для парсинга вместо обхода ФС
- Явный контракт с MCP-сервером
- CI-валидация соответствия реальным файлам
- Автогенерация из файловой системы

```yaml
# programs/1-personal/1.1-self-development/index.yaml
---
# Метаданные руководства
id: "1.1"
slug: "self-development"
title: "Системное саморазвитие"
program: "1-personal"
status: active
version: "2.3"

# Статистика (автовычисляемая)
stats:
  sections_count: 5
  objects_count: 47
  tables_count: 12
  questions_count: 8

# Структура разделов
sections:
  - code: "01"
    slug: "attention"
    title: "Внимание"
    path: "01-attention/"
    objects:
      - order: 1
        type: text
        file: "01-pomodoro.md"
        id: "1.1.01.01"
        title: "Техника Pomodoro"
      - order: 2
        type: table
        file: "02-attention-log.table.yaml"
        id: "T.1.1.01.02"
        title: "Лог внимания"
      - order: 3
        type: text
        file: "03-focus.md"
        id: "1.1.01.03"
        title: "Фокусировка"
      - order: 4
        type: case
        file: "04-interruptions.case.yaml"
        id: "C.1.1.01.04"
        title: "Кейс: Прерывания"
      - order: 5
        type: folder
        file: "05-techniques/"
        id: "1.1.01.05"
        title: "Техники управления вниманием"
        children:
          - order: 1
            type: text
            file: "01-timeboxing.md"
            id: "1.1.01.05.01"
            title: "Timeboxing"
          - order: 2
            type: question
            file: "02-practice.question.yaml"
            id: "Q.1.1.01.05.02"
            title: "Практика техник"
          - order: 3
            type: text
            file: "03-batching.md"
            id: "1.1.01.05.03"
            title: "Batching"
    # Grouped-объекты (в папках tables/, questions/)
    grouped:
      tables:
        - file: "01-focus-tracker.table.yaml"
          id: "T.1.1.01.G01"
          title: "Трекер фокусировки"
      questions:
        - file: "01-reflection.question.yaml"
          id: "Q.1.1.01.G01"
          title: "Рефлексия по разделу"

  - code: "02"
    slug: "planning"
    title: "Планирование"
    path: "02-planning/"
    objects:
      - order: 1
        type: text
        file: "01-daily.md"
        id: "1.1.02.01"
        title: "Ежедневное планирование"
      - order: 2
        type: table
        file: "02-daily-plan.table.yaml"
        id: "T.1.1.02.02"
        title: "Шаблон дневного плана"
      - order: 3
        type: text
        file: "03-weekly.md"
        id: "1.1.02.03"
        title: "Недельное планирование"
    grouped:
      tables:
        - file: "01-weekly-plan.table.yaml"
          id: "T.1.1.02.G01"
          title: "Шаблон недельного плана"

# Общие объекты руководства (SS=00)
root_objects:
  tables:
    - file: "tables/01-target-system.table.yaml"
      id: "T.1.1.00.01"
      title: "Целевая система"
  questions:
    - file: "questions/01-final-reflection.question.yaml"
      id: "Q.1.1.00.01"
      title: "Финальная рефлексия"
```

#### Типы объектов в `index.yaml`

| type | Описание | Суффикс файла |
|------|----------|---------------|
| `text` | Текстовый подраздел | `.md` |
| `table` | Таблица моделирования | `.table.yaml` |
| `case` | Кейс с выбором ответа | `.case.yaml` |
| `question` | Вопрос с текстовым ответом | `.question.yaml` |
| `folder` | Подраздел-папка (содержит `children`) | `/` |

#### JSON Schema для валидации

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["id", "slug", "title", "sections"],
  "properties": {
    "id": {"type": "string", "pattern": "^[0-9]+\\.[0-9]+$"},
    "slug": {"type": "string", "pattern": "^[a-z0-9-]+$"},
    "title": {"type": "string"},
    "sections": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["code", "slug", "title", "path", "objects"],
        "properties": {
          "code": {"type": "string", "pattern": "^[0-9]{2}$"},
          "objects": {
            "type": "array",
            "items": {"$ref": "#/definitions/object"}
          }
        }
      }
    }
  },
  "definitions": {
    "object": {
      "type": "object",
      "required": ["order", "type", "file", "id"],
      "properties": {
        "order": {"type": "integer", "minimum": 1},
        "type": {"enum": ["text", "table", "case", "question", "folder"]},
        "file": {"type": "string"},
        "id": {"type": "string"},
        "title": {"type": "string"},
        "children": {
          "type": "array",
          "items": {"$ref": "#/definitions/object"}
        }
      }
    }
  }
}
```

### 3.5 Подраздел — полный текст (`subsection.md`)

```yaml
---
guide: C.Guide.SelfDevelopment
section: 01-attention
subsection: "1.1"
title: Техника Pomodoro
status: active
modified: 2025-12-15

# Тип контента
content_type: full          # full | concepts | mixed

# Контент
word_count: 2500
reading_time: 12
images: ["fig-01-pomodoro.png"]
tables: []

# Связи
depends_on: []
referenced_concepts: ["_meta/concepts/attention.md"]
---

# 1.1. Техника Pomodoro

## Что такое Pomodoro

Текст подраздела...

![Цикл Pomodoro](../assets/fig-01-pomodoro.png)
*Рис. 1.1. Цикл работы по методу Pomodoro*

## Применение техники

| Этап | Длительность | Действие |
|------|--------------|----------|
| Работа | 25 мин | Сфокусированная работа |
| Отдых | 5 мин | Короткий перерыв |
| ... | ... | ... |

> **Ключевая мысль:** Pomodoro помогает управлять вниманием

## Практика

Выполните упражнение...
```

### 3.6 Подраздел — краткий формат (concepts)

Для материалов, которые содержат **список понятий и ключевых идей** (используется в универсальном руководстве):

```yaml
---
guide: C.Guide.SelfDevelopment
section: 01-attention
subsection: "1.1"
title: Техника Pomodoro
status: active
modified: 2025-12-15

# Тип контента
content_type: concepts       # Краткий формат — список понятий

# Ссылка на полный текст
full_text_ref: "programs/1-personal/1.1-self-development/01-attention/01-pomodoro.md"
---

# 1.1. Техника Pomodoro (понятия)

## Ключевые понятия

| Понятие | Определение |
|---------|-------------|
| **Pomodoro** | Единица работы длительностью 25 минут |
| **Фокусировка** | Состояние концентрации на одной задаче |
| **Прерывание** | Внешнее или внутреннее отвлечение |

## Ключевые идеи

1. Работа интервалами повышает продуктивность
2. Регулярные перерывы предотвращают выгорание
3. Отслеживание прерываний помогает их минимизировать

## Связанные понятия

- [[Внимание]]
- [[Концентрация]]
- [[Тайм-менеджмент]]

## Контрольные вопросы

- Какова оптимальная длительность одного «помидора»?
- Как реагировать на прерывания во время работы?
```

### 3.7 Материалы для ДЗ-чекера (`_check/`)

#### questions.md
```yaml
---
guide: C.Guide.SystemsThinking
type: homework_questions
---

# Карта вопросов

## ДЗ-1: Введение в системы

### Вопрос 1.1
- **Тип:** open_text
- **Глава:** 1
- **Компетенция:** определение системы
- **Формулировка:** Опишите систему, с которой вы работаете...
- **Критерии:**
  - Названа целевая система
  - Указана надсистема
  - Определены границы

### Вопрос 1.2
- **Тип:** table
- **Глава:** 2
- **Формулировка:** Заполните таблицу уровней...
- **Шаблон:** |Уровень|Система|Функция|
```

#### rubrics.md
```yaml
---
guide: C.Guide.SystemsThinking
type: assessment_rubrics
---

# Рубрики оценки

## Рубрика: Определение системы

| Балл | Критерий |
|------|----------|
| 0 | Система не названа |
| 1 | Названа, но не определена |
| 2 | Определена, но без границ |
| 3 | Полное определение с границами |

## Рубрика: Таблица уровней

| Балл | Критерий |
|------|----------|
| 0 | Таблица пустая |
| 1 | 1-2 уровня |
| 2 | 3+ уровней, есть ошибки |
| 3 | Корректная холархия |
```

---

## 4. Правила нумерации

> См. также: [1.4 SoTA-практики именования файлов](#14-sota-практики-именования-файлов)

### 4.1 Логическая иерархия кодов

Логический код используется для **ссылок, идентификации и навигации**.

```
P.G.SS.SS.SS
│ │  │  │  └── Подподраздел (01-99)
│ │  │  └───── Подраздел (01-99)
│ │  └──────── Раздел (01-99)
│ └──────────── Руководство (1-9)
└────────────── Программа (1-3)

Примеры:
1.1.01.02       = Личное развитие → Саморазвитие → Раздел 01 → Подраздел 02
1.4.01.03.01    = Личное развитие → Системный фитнес → Раздел 01 → Подраздел 03 → Подподраздел 01
2.2.05.01       = Рабочее развитие → Системное мышление → Раздел 05 → Подраздел 01
2.6.02.03       = Рабочее развитие → Системный менеджмент → Раздел 02 → Подраздел 03
```

### 4.2 Физическая нумерация (имена файлов)

Физический префикс используется для **сортировки файлов в файловой системе**.

| Уровень | Логический код | Физический путь | Пример |
|---------|----------------|-----------------|--------|
| Программа | `P` | `{P}-{slug}/` | `1-personal/` |
| Руководство | `P.G` | `{P}.{G}-{slug}/` | `1.1-self-development/` |
| Раздел | `P.G.SS` | `{SS}-{slug}/` | `01-attention/` |
| Подраздел (файл) | `P.G.SS.SS` | `{SS}-{slug}.md` | `02-focus.md` |
| Подраздел (папка) | `P.G.SS.SS` | `{SS}-{slug}/` | `03-techniques/` |
| Подподраздел | `P.G.SS.SS.SS` | `{SS}-{slug}.md` | `01-timeboxing.md` |

**Правила zero-padding:**
- Программы и руководства: без padding (1-3, 1-9)
- Разделы, подразделы, подподразделы: 2 цифры (01-99)

### 4.3 Полный пример соответствия

```
Логический код   Физический путь
────────────────────────────────────────────────────────────────
1                programs/1-personal/
1.1              programs/1-personal/1.1-self-development/
1.1.01           programs/1-personal/1.1-self-development/01-attention/
1.1.01.01        programs/1-personal/1.1-self-development/01-attention/01-pomodoro.md
1.1.01.02        programs/1-personal/1.1-self-development/01-attention/02-focus.md
1.1.01.03        programs/1-personal/1.1-self-development/01-attention/03-techniques/
1.1.01.03.01     programs/1-personal/1.1-self-development/01-attention/03-techniques/01-timeboxing.md
1.1.01.03.02     programs/1-personal/1.1-self-development/01-attention/03-techniques/02-batching.md
1.1.02           programs/1-personal/1.1-self-development/02-planning/
1.1.02.01        programs/1-personal/1.1-self-development/02-planning/01-daily.md
```

### 4.4 Именование медиа и ДЗ

| Элемент | Паттерн | Пример |
|---------|---------|--------|
| Картинка | `fig-{SS}-{name}.png` | `fig-01-pomodoro-cycle.png` |
| Таблица | `table-{SS}-{name}.csv` | `table-02-schedule.csv` |
| ДЗ-файл | `hw-{SS}.md` | `hw-01.md` |

### 4.5 Идентификаторы в словаре сущностей

| Сущность | Формат ID | Пример |
|----------|-----------|--------|
| Программа | `C.Program.{Name}` | `C.Program.PersonalDevelopment` |
| Руководство | `C.Guide.{Name}` | `C.Guide.SelfDevelopment` |
| Раздел | `C.Section.{Guide}.{N}` | `C.Section.SelfDevelopment.01` |
| Подраздел | `C.Subsection.{Guide}.{S}.{N}` | `C.Subsection.SelfDevelopment.01.02` |
| Подподраздел | `C.Topic.{Guide}.{S}.{SS}.{N}` | `C.Topic.SelfDevelopment.01.03.01` |
| ДЗ | `C.Homework.{Guide}.{N}` | `C.Homework.SelfDevelopment.01` |

---

## 5. MCP-сервер: эндпоинты

### 5.1 Конфигурация (`.mcp/endpoints.yaml`)

```yaml
version: "1.0"
base_path: "/guides"

endpoints:
  # ═══════════════════════════════════════════════════════════════
  # НАВИГАЦИЯ
  # ═══════════════════════════════════════════════════════════════

  - path: /manifest
    method: GET
    description: Получить манифест всех программ и руководств
    returns: manifest.json

  - path: /programs
    method: GET
    description: Список программ
    returns: [{id, title, guides_count}]

  - path: /programs/{program_id}
    method: GET
    description: Детали программы с roadmap
    returns: program.md + roadmap.md

  # ═══════════════════════════════════════════════════════════════
  # РУКОВОДСТВА (иерархическая структура)
  # ═══════════════════════════════════════════════════════════════

  - path: /guides/{guide_code}
    method: GET
    description: Индекс руководства
    returns: index.md

  - path: /guides/{guide_code}/sections
    method: GET
    description: Список разделов (папок первого уровня)
    returns: [{section_num, title, subsections_count}]

  - path: /guides/{guide_code}/sections/{section_num}
    method: GET
    description: Содержимое раздела (список подразделов)
    returns: [{subsection_num, title, type: "file"|"folder"}]

  - path: /guides/{guide_code}/sections/{section_num}/subsections/{subsection_num}
    method: GET
    description: Содержимое подраздела (документ или список подподразделов)
    returns: subsection.md | [{topic_num, title}]

  - path: /guides/{guide_code}/full
    method: GET
    description: Всё руководство целиком (для контекста)
    returns: concatenated sections + subsections

  - path: /guides/{guide_code}/tree
    method: GET
    description: Полное дерево структуры руководства
    returns: {sections: [{title, subsections: [...]}]}

  # ═══════════════════════════════════════════════════════════════
  # ДЗ-ЧЕКЕР (специальные эндпоинты для проверки домашних заданий)
  # ═══════════════════════════════════════════════════════════════

  - path: /guides/{guide_code}/homework
    method: GET
    description: Все вопросы ДЗ руководства
    returns: questions.md

  - path: /guides/{guide_code}/homework/{hw_num}
    method: GET
    description: Конкретное домашнее задание
    returns: {questions, rubrics, related_sections}

  - path: /guides/{guide_code}/rubrics
    method: GET
    description: Все рубрики оценки руководства
    returns: rubrics.md

  - path: /guides/{guide_code}/check-context
    method: GET
    description: Полный контекст для проверки ДЗ
    returns: |
      {
        guide_info: index.md,
        sections: [section.md...],
        questions: questions.md,
        rubrics: rubrics.md,
        answers_key: answers-key.md (если есть)
      }

  - path: /guides/{guide_code}/check-context/{hw_num}
    method: GET
    description: Контекст для проверки конкретного ДЗ
    returns: |
      {
        hw_questions: [...],
        related_sections: [section.md...],
        rubrics: [...],
        expected_concepts: [...]
      }

  # ═══════════════════════════════════════════════════════════════
  # УНИВЕРСАЛЬНОЕ РУКОВОДСТВО (понятия и идеи)
  # ═══════════════════════════════════════════════════════════════

  - path: /universal/concepts
    method: GET
    description: Все понятия (краткие материалы)
    returns: [{concept, definition, guide_ref}]

  - path: /universal/concepts/by-guide/{guide_code}
    method: GET
    description: Понятия конкретного руководства
    returns: concepts.md

  - path: /universal/concepts/by-topic/{topic}
    method: GET
    description: Понятия по теме
    returns: concepts.md

  - path: /universal/ideas
    method: GET
    description: Ключевые идеи всех руководств
    returns: [{idea, description, guide_ref}]

  # ═══════════════════════════════════════════════════════════════
  # МЕТОДОЛОГИЯ
  # ═══════════════════════════════════════════════════════════════

  - path: /meta/glossary
    method: GET
    description: Глоссарий терминов
    returns: glossary.md

  - path: /meta/concepts
    method: GET
    description: Список базовых понятий
    returns: [concept.md...]

  - path: /meta/templates/{template_name}
    method: GET
    description: Шаблон документа
    returns: template.md

  - path: /meta/generation-rules
    method: GET
    description: Правила генерации для ИИ
    returns: generation-rules.md

  # ═══════════════════════════════════════════════════════════════
  # ТАБЛИЦЫ МОДЕЛИРОВАНИЯ
  # ═══════════════════════════════════════════════════════════════

  - path: /tables
    method: GET
    description: Список всех таблиц моделирования
    returns: [{id, title, guide_ref, section}]

  - path: /tables/{table_id}
    method: GET
    description: Полное описание таблицы (схема + примеры)
    returns: table.yaml

  - path: /tables/{table_id}/schema
    method: GET
    description: JSON Schema для валидации
    returns: schema.json

  - path: /tables/{table_id}/template
    method: GET
    params: {format: csv|json|markdown|coda|nocodb}
    description: Пустой шаблон таблицы в нужном формате
    returns: template.{format}

  - path: /tables/{table_id}/example
    method: GET
    description: Пример заполненной таблицы
    returns: example.json

  - path: /guides/{guide_code}/tables
    method: GET
    description: Все таблицы руководства
    returns: [{id, title, section, order}]

  - path: /guides/{guide_code}/sections/{section_num}/tables
    method: GET
    description: Таблицы конкретного раздела
    returns: [{id, title, order}]

  # ═══════════════════════════════════════════════════════════════
  # ВОПРОСЫ И КЕЙСЫ
  # ═══════════════════════════════════════════════════════════════

  - path: /questions
    method: GET
    description: Список всех вопросов и кейсов
    returns: [{id, title, type, guide_ref, section}]

  - path: /questions/{question_id}
    method: GET
    description: Полное описание вопроса
    returns: question.yaml

  - path: /questions/by-type/{type}
    method: GET
    params: {type: case|open|reflection|multiple_choice}
    description: Вопросы по типу
    returns: [{id, title, guide_ref}]

  - path: /guides/{guide_code}/questions
    method: GET
    description: Все вопросы руководства
    returns: [{id, title, section, type}]

  - path: /guides/{guide_code}/sections/{section_num}/questions
    method: GET
    description: Вопросы конкретного раздела
    returns: [{id, title, type}]

  # ═══════════════════════════════════════════════════════════════
  # РАБОЧИЕ ТЕТРАДИ
  # ═══════════════════════════════════════════════════════════════

  - path: /workbooks
    method: GET
    description: Список рабочих тетрадей
    returns: [{id, title, type, tables_count}]

  - path: /workbooks/{workbook_id}
    method: GET
    description: Манифест рабочей тетради
    returns: workbook.yaml

  - path: /workbooks/{workbook_id}/tables
    method: GET
    description: Все таблицы тетради в порядке заполнения
    returns: [{order, table_id, title, depends_on, required}]

  - path: /workbooks/{workbook_id}/questions
    method: GET
    description: Все вопросы тетради
    returns: [{section, questions}]

  - path: /workbooks/{workbook_id}/export
    method: GET
    params: {format: coda|nocodb|notion|pdf|json}
    description: Экспорт структуры тетради в моделер
    returns: export_config.{format}

  - path: /workbooks/{workbook_id}/full
    method: GET
    description: Полная тетрадь (таблицы + вопросы + инструкции)
    returns: |
      {
        tables: [table.yaml...],
        questions: [questions.md...],
        guide_sections: [section.md...]
      }

  # ═══════════════════════════════════════════════════════════════
  # ПОИСК
  # ═══════════════════════════════════════════════════════════════

  - path: /search
    method: GET
    params:
      q: string                              # поисковый запрос
      scope: program|guide|section|universal # область поиска
      content_type: full|concepts|all        # тип контента
    description: Полнотекстовый поиск
    returns: [{path, title, snippet, score, content_type}]

  - path: /search/concepts
    method: GET
    params: {q: string}
    description: Поиск по понятиям
    returns: [{concept, definition, guide_ref, full_text_ref}]
```

### 5.2 Политики доступа

```yaml
# .mcp/access-policies.yaml
policies:
  # ДЗ-чекер — автоматическая проверка домашних заданий (ИИ-агент)
  - role: AGT.HomeworkChecker
    allow:
      - /guides/*/check-context          # Полный контекст для проверки
      - /guides/*/check-context/*        # Контекст конкретного ДЗ
      - /guides/*/homework               # Вопросы ДЗ
      - /guides/*/homework/*             # Конкретное ДЗ
      - /guides/*/rubrics                # Рубрики оценки
      - /meta/rubrics/*                  # Общие рубрики
      - /universal/concepts/*            # Понятия для проверки терминологии
      - /tables/*/schema                 # Схемы таблиц для валидации
      - /questions/*                     # Вопросы и кейсы
      - /workbooks/*/questions           # Вопросы тетрадей

  # Наставник — человек-проверяющий сложные ДЗ
  - role: R.Mentor
    allow:
      - /guides/*                        # Полный доступ к руководствам
      - /tables/*                        # Таблицы для проверки заполнения
      - /questions/*                     # Вопросы и критерии
      - /workbooks/*                     # Рабочие тетради студентов
      - /meta/rubrics/*                  # Рубрики оценки

  # Навигатор по руководствам
  - role: AGT.RouteGuide
    allow:
      - /manifest
      - /programs/*
      - /guides/*/sections/*
      - /guides/*/tree
      - /meta/glossary
      - /search
      - /tables                          # Список таблиц для навигации
      - /questions                       # Список вопросов
      - /workbooks                       # Список тетрадей

  # Генератор контента
  - role: AGT.ContentGenerator
    allow:
      - /meta/*
      - /guides/*/full
      - /universal/*
      - /tables/*                        # Доступ к таблицам для генерации
      - /questions/*                     # Доступ к вопросам
      - /workbooks/*                     # Доступ к тетрадям

  # Сервис понятий (для универсального руководства)
  - role: AGT.ConceptsService
    allow:
      - /universal/*
      - /search/concepts
      - /guides/*/sections/*/subsections/*  # Доступ к кратким материалам

  # Сервис моделирования (для моделеров: Coda, NocoDB, Notion)
  - role: AGT.ModelingService
    allow:
      - /tables                          # Список таблиц
      - /tables/*                        # Детали таблиц
      - /tables/*/schema                 # JSON Schema
      - /tables/*/template               # Шаблоны таблиц
      - /workbooks                       # Список тетрадей
      - /workbooks/*                     # Детали тетрадей
      - /workbooks/*/tables              # Таблицы тетради
      - /workbooks/*/export              # Экспорт в моделеры
```

---

## 6. Процессы обновления

### 6.1 Workflow авторов

```
┌─────────────────┐    ┌──────────────┐    ┌─────────────┐
│  Obsidian /     │───▶│  Git Push    │───▶│  CI/CD      │
│  VSCode         │    │  (PR)        │    │  Validation │
└─────────────────┘    └──────────────┘    └─────────────┘
                                                  │
                              ┌───────────────────┘
                              ▼
                       ┌─────────────┐    ┌─────────────┐
                       │  Merge to   │───▶│  MCP Cache  │
                       │  main       │    │  Invalidate │
                       └─────────────┘    └─────────────┘
```

### 6.2 Автогенерация `index.yaml`

Файлы `index.yaml` могут генерироваться автоматически из структуры файловой системы.

#### Скрипт генерации

```python
#!/usr/bin/env python3
# scripts/generate-indexes.py
"""
Генерирует index.yaml для каждого руководства на основе файловой системы.

Использование:
    python scripts/generate-indexes.py programs/
    python scripts/generate-indexes.py programs/1-personal/1.1-self-development/
"""

import os
import sys
import yaml
import re
from pathlib import Path
from typing import Optional

# Маппинг суффиксов на типы объектов
SUFFIX_TO_TYPE = {
    '.md': 'text',
    '.table.yaml': 'table',
    '.case.yaml': 'case',
    '.question.yaml': 'question',
}

# Папки, которые не являются разделами
EXCLUDED_DIRS = {'tables', 'questions', 'assets', '_check', '_meta'}


def get_object_type(filename: str, is_dir: bool) -> Optional[str]:
    """Определяет тип объекта по имени файла."""
    if is_dir:
        return 'folder'
    for suffix, obj_type in SUFFIX_TO_TYPE.items():
        if filename.endswith(suffix):
            return obj_type
    return None


def parse_order_and_slug(name: str) -> tuple[int, str]:
    """Извлекает порядковый номер и slug из имени файла/папки."""
    match = re.match(r'^(\d+)-(.+?)(?:\.[^/]+)?$', name)
    if match:
        return int(match.group(1)), match.group(2)
    return 0, name


def get_title_from_frontmatter(filepath: Path) -> Optional[str]:
    """Извлекает title из frontmatter YAML-файла."""
    try:
        with open(filepath, 'r', encoding='utf-8') as f:
            content = f.read()
        if content.startswith('---'):
            parts = content.split('---', 2)
            if len(parts) >= 3:
                fm = yaml.safe_load(parts[1])
                return fm.get('title')
    except Exception:
        pass
    return None


def generate_object_id(guide_id: str, section_code: str,
                       order: int, obj_type: str,
                       parent_order: Optional[int] = None) -> str:
    """Генерирует логический ID объекта."""
    prefix = {'table': 'T.', 'case': 'C.', 'question': 'Q.'}.get(obj_type, '')

    if parent_order:
        return f"{prefix}{guide_id}.{section_code}.{parent_order:02d}.{order:02d}"
    return f"{prefix}{guide_id}.{section_code}.{order:02d}"


def scan_directory(path: Path, guide_id: str, section_code: str,
                   parent_order: Optional[int] = None) -> list[dict]:
    """Рекурсивно сканирует директорию и возвращает список объектов."""
    objects = []

    items = sorted(path.iterdir(), key=lambda x: x.name)
    for item in items:
        if item.name.startswith('.') or item.name in EXCLUDED_DIRS:
            continue

        is_dir = item.is_dir()
        obj_type = get_object_type(item.name, is_dir)

        if obj_type is None:
            continue

        order, slug = parse_order_and_slug(item.name)
        if order == 0:
            continue

        obj_id = generate_object_id(guide_id, section_code, order,
                                     obj_type, parent_order)

        title = get_title_from_frontmatter(item) if item.is_file() else slug.replace('-', ' ').title()

        obj = {
            'order': order,
            'type': obj_type,
            'file': item.name + ('/' if is_dir else ''),
            'id': obj_id,
            'title': title or slug,
        }

        if is_dir:
            children = scan_directory(item, guide_id, section_code, order)
            if children:
                obj['children'] = children

        objects.append(obj)

    return objects


def scan_grouped_objects(path: Path, guide_id: str,
                         section_code: str, group_type: str) -> list[dict]:
    """Сканирует папку grouped-объектов (tables/, questions/)."""
    objects = []
    group_path = path / group_type

    if not group_path.exists():
        return objects

    type_map = {'tables': 'table', 'questions': 'question'}
    obj_type = type_map.get(group_type, group_type)
    prefix = {'table': 'T.', 'question': 'Q.'}.get(obj_type, '')

    items = sorted(group_path.iterdir(), key=lambda x: x.name)
    for item in items:
        if not item.is_file():
            continue

        order, slug = parse_order_and_slug(item.name)
        if order == 0:
            continue

        obj_id = f"{prefix}{guide_id}.{section_code}.G{order:02d}"
        title = get_title_from_frontmatter(item) or slug

        objects.append({
            'file': item.name,
            'id': obj_id,
            'title': title,
        })

    return objects


def generate_guide_index(guide_path: Path) -> dict:
    """Генерирует полный index.yaml для руководства."""
    # Извлекаем ID руководства из имени папки (например, "1.1-self-development" -> "1.1")
    guide_name = guide_path.name
    match = re.match(r'^(\d+\.\d+)-(.+)$', guide_name)
    if not match:
        raise ValueError(f"Invalid guide folder name: {guide_name}")

    guide_id = match.group(1)
    guide_slug = match.group(2)

    # Читаем метаданные из index.md если есть
    index_md = guide_path / 'index.md'
    title = get_title_from_frontmatter(index_md) or guide_slug.replace('-', ' ').title()

    # Сканируем разделы
    sections = []
    section_dirs = sorted([d for d in guide_path.iterdir()
                          if d.is_dir() and d.name not in EXCLUDED_DIRS
                          and not d.name.startswith('.')])

    for section_dir in section_dirs:
        order, slug = parse_order_and_slug(section_dir.name)
        if order == 0:
            continue

        section_code = f"{order:02d}"

        section = {
            'code': section_code,
            'slug': slug,
            'title': slug.replace('-', ' ').title(),
            'path': section_dir.name + '/',
            'objects': scan_directory(section_dir, guide_id, section_code),
        }

        # Grouped-объекты
        grouped = {}
        for group_type in ['tables', 'questions']:
            group_objects = scan_grouped_objects(section_dir, guide_id,
                                                  section_code, group_type)
            if group_objects:
                grouped[group_type] = group_objects

        if grouped:
            section['grouped'] = grouped

        sections.append(section)

    # Корневые объекты
    root_objects = {}
    for group_type in ['tables', 'questions']:
        group_objects = scan_grouped_objects(guide_path, guide_id, '00', group_type)
        if group_objects:
            root_objects[group_type] = group_objects

    # Статистика
    total_objects = sum(len(s.get('objects', [])) for s in sections)
    total_tables = sum(len(s.get('grouped', {}).get('tables', [])) for s in sections)
    total_questions = sum(len(s.get('grouped', {}).get('questions', [])) for s in sections)

    index = {
        'id': guide_id,
        'slug': guide_slug,
        'title': title,
        'program': guide_path.parent.name,
        'status': 'active',
        'stats': {
            'sections_count': len(sections),
            'objects_count': total_objects,
            'tables_count': total_tables + len(root_objects.get('tables', [])),
            'questions_count': total_questions + len(root_objects.get('questions', [])),
        },
        'sections': sections,
    }

    if root_objects:
        index['root_objects'] = root_objects

    return index


def main():
    if len(sys.argv) < 2:
        print("Usage: python generate-indexes.py <path>")
        sys.exit(1)

    path = Path(sys.argv[1])

    # Если путь к конкретному руководству
    if (path / 'index.md').exists():
        guides = [path]
    else:
        # Ищем все руководства рекурсивно
        guides = [p.parent for p in path.rglob('index.md')
                  if re.match(r'^\d+\.\d+-', p.parent.name)]

    for guide_path in guides:
        try:
            index = generate_guide_index(guide_path)
            output_path = guide_path / 'index.yaml'

            with open(output_path, 'w', encoding='utf-8') as f:
                yaml.dump(index, f, allow_unicode=True,
                         default_flow_style=False, sort_keys=False)

            print(f"✓ Generated: {output_path}")
        except Exception as e:
            print(f"✗ Error in {guide_path}: {e}")


if __name__ == '__main__':
    main()
```

#### Интеграция в CI/CD

```yaml
# .github/workflows/validate-guides.yaml
jobs:
  validate:
    steps:
      - name: Generate indexes
        run: python scripts/generate-indexes.py programs/

      - name: Check for uncommitted changes
        run: |
          if [[ -n $(git status --porcelain) ]]; then
            echo "::error::index.yaml files are out of sync with filesystem"
            git diff
            exit 1
          fi
```

### 6.3 Валидация CI

```yaml
# .github/workflows/validate-guides.yaml
checks:
  - frontmatter_required_fields
  - chapter_numbering_sequence
  - image_refs_exist
  - table_csv_valid
  - rubric_format_valid
  - manifest_sync
  - index_yaml_sync              # NEW: проверка синхронизации index.yaml
  - index_yaml_schema            # NEW: валидация по JSON Schema
```

---

## 7. Преимущества структуры

| Требование | Как решено |
|------------|------------|
| **Гранулярный доступ MCP** | Каждый подраздел — отдельный файл, разделы — папки |
| **Машинная обработка** | `index.yaml` — структурированный индекс для MCP/CI (автогенерируется) |
| **Параллельное редактирование** | Авторы работают в разных папках/файлах |
| **Версионирование** | Git + frontmatter version |
| **ДЗ-чекер** | `_check/` с вопросами, рубриками, эталонными ответами |
| **Универсальное руководство** | Краткие материалы (concepts) собираются в `universal/` |
| **Типы контента** | full / concepts / mixed — поддержка разных форматов |
| **ИИ-генерация** | `_meta/` с шаблонами и правилами |
| **Локальность медиа** | `assets/` на уровне раздела и руководства |
| **Устойчивая нумерация** | Иерархическая P.G.S.SS.SSS |
| **Расширяемость** | Новые программы/руководства по паттерну |
| **Реальные названия** | Названия из [system-school.ru](https://system-school.ru/#programs) |
| **Таблицы моделирования** | `*.table.yaml` с JSON Schema, примерами, экспортом |
| **Рабочие тетради** | `workbook.yaml` объединяет таблицы из разных руководств |
| **Мультиплатформенность** | Экспорт в Coda, NocoDB, Notion, CSV, PDF |
| **Связанные таблицы** | Relations между таблицами разных руководств |

---

## 8. Чеклист для архитектора

- [ ] Создать корневую структуру папок (programs/, universal/, _meta/, .mcp/)
- [ ] Настроить `manifest.json` с реальными названиями руководств
- [ ] Создать шаблоны в `_meta/templates/`:
  - [ ] guide-template.md
  - [ ] section-template.md
  - [ ] subsection-template.md (полный формат)
  - [ ] concepts-template.md (краткий формат)
  - [ ] table-template.yaml (таблица моделирования)
  - [ ] workbook-template.yaml (рабочая тетрадь)
- [ ] Развернуть MCP-сервер с эндпоинтами
- [ ] Настроить hw-checker-config.yaml для ДЗ-чекера
- [ ] Настроить CI/CD валидацию
- [ ] Настроить систему `index.yaml`:
  - [ ] Добавить скрипт `scripts/generate-indexes.py`
  - [ ] Добавить JSON Schema для валидации `index.yaml`
  - [ ] Настроить CI-проверку синхронизации `index.yaml` с ФС
  - [ ] Протестировать генерацию на тестовом руководстве
- [ ] Создать первое руководство по шаблону (иерархическая структура)
- [ ] Настроить систему таблиц моделирования:
  - [ ] Создать JSON Schema для базовых типов таблиц
  - [ ] Настроить экспорт в Coda/NocoDB/Notion
  - [ ] Протестировать валидацию таблиц ДЗ-чекером
- [ ] Настроить рабочие тетради:
  - [ ] Создать манифесты тетрадей по руководствам
  - [ ] Настроить кросс-руководственные связи таблиц
  - [ ] Протестировать экспорт тетради в моделеры
- [ ] Протестировать:
  - [ ] Чтение структуры из `index.yaml` через MCP
  - [ ] Доступ ДЗ-чекера к `/check-context`
  - [ ] Работу с универсальным руководством (`/universal/concepts`)
  - [ ] Навигацию по иерархии (`/guides/*/tree`)
  - [ ] Получение таблиц (`/tables/*`, `/workbooks/*`)
  - [ ] Экспорт тетрадей (`/workbooks/*/export`)
- [ ] Документировать процесс добавления руководства
- [ ] Документировать процесс создания таблиц моделирования

---

## 9. Открытые вопросы

1. **Локализация:** Нужны ли версии на других языках?
2. **Версионирование руководств:** Хранить ли старые версии?
3. **Права доступа:** Разные уровни для разных ролей?
4. **Кэширование MCP:** Как инвалидировать при обновлении?

---

*Документ создан для архитектора экосистемы развития.*
