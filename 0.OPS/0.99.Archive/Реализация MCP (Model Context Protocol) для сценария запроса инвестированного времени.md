
# üí´ MCP –¶–∏—Ñ—Ä–æ–≤–æ–≥–æ –¥–≤–æ–π–Ω–∏–∫–∞ (Digital Twin)

## –°—Ü–µ–Ω–∞—Ä–∏–π: –∑–∞–ø—Ä–æ—Å –∫ –ü—Ä–æ–≤–æ–¥–Ω–∏–∫—É –æ–± –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

> üí¨ **–ß–µ–ª–æ–≤–µ–∫ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ü—Ä–æ–≤–æ–¥–Ω–∏–∫–∞ (–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¶–∏—Ñ—Ä–æ–≤–æ–≥–æ –¥–≤–æ–π–Ω–∏–∫–∞):**  
> _¬´–°–∫–æ–ª—å–∫–æ —è –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –≤—Ä–µ–º–µ–Ω–∏ –∑–∞ –Ω–µ–¥–µ–ª—é –∏ –≤ —Å—Ä–µ–¥–Ω–µ–º –∑–∞ –¥–µ–Ω—å?¬ª_

---
#### üëá –í–æ—Ç —Ç–∏–ø–æ–≤–∞—è —Ü–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–∞:
–ß–µ–ª–æ–≤–µ–∫:
  ‚Äú–ü—Ä–æ–≤–æ–¥–Ω–∏–∫, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ —è –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –∑–∞ –Ω–µ–¥–µ–ª—é?‚Äù

–ü—Ä–æ–≤–æ–¥–Ω–∏–∫:
  ‚Üí –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç intent ‚Äútime_invested_summary‚Äù
  ‚Üí –Ω–∞—Ö–æ–¥–∏—Ç tool ‚Äúdt.get_time_invested_summary‚Äù
  ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç MCP-—Å–µ—Ä–≤–µ—Ä

MCP-—Å–µ—Ä–≤–µ—Ä:
  ‚Üí –Ω–∞—Ö–æ–¥–∏—Ç handler get_time_invested_summary()
  ‚Üí –¥–æ—Å—Ç–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Digital Twin Database
  ‚Üí —Å—É–º–º–∏—Ä—É–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü—Ä–æ–≤–æ–¥–Ω–∏–∫:
  ‚Üí —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç: ‚Äú9 —á–∞—Å–æ–≤ 48 –º–∏–Ω—É—Ç, –≤ —Å—Ä–µ–¥–Ω–µ–º –ø–æ 1 —á 24 –º–∏–Ω –≤ –¥–µ–Ω—å‚Äù


### üß© –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è resource

```mermaid
sequenceDiagram
    participant –ß as üë§ –ß–µ–ª–æ–≤–µ–∫
    participant –ü as ü§ñ –ü—Ä–æ–≤–æ–¥–Ω–∏–∫<br/>(–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç)
    participant MCP as ‚öôÔ∏è MCP-—Å–µ—Ä–≤–µ—Ä
    participant –ë–î as üóÑÔ∏è Digital Twin<br/>Database

    Note over –ß,–ë–î: üì• –ó–ê–ü–†–û–°

    –ß->>–ü: "–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ —è –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–ª<br/>–∑–∞ –Ω–µ–¥–µ–ª—é?"

    rect rgb(230, 245, 255)
        Note right of –ü: üìö –ß–∏—Ç–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã
        –ü-->>–ü: dt://catalogs/metrics<br/>‚Üí —á—Ç–æ —Ç–∞–∫–æ–µ "–∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è"
        –ü-->>–ü: mcp-manifest.json<br/>‚Üí –≤—ã–±–∏—Ä–∞–µ—Ç tool
    end

    –ü->>MCP: dt.get_time_invested_summary<br/>{ period: "week" }

    rect rgb(255, 245, 230)
        Note right of MCP: üìö –ß–∏—Ç–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã
        MCP-->>MCP: dt://catalogs/metrics<br/>‚Üí –∫–∞–∫–∏–µ —Ç–∏–ø—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —É—á–∏—Ç—ã–≤–∞—Ç—å
        MCP-->>MCP: dt://policies/data_quality<br/>‚Üí –∫–∞–∫ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    end

    MCP->>–ë–î: SELECT * FROM activity_log<br/>WHERE date >= ...
    –ë–î-->>MCP: –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

    Note over –ß,–ë–î: üì§ –û–¢–í–ï–¢

    MCP-->>–ü: { total_hours: 9.8,<br/>average_per_day: 1.4, ... }

    rect rgb(230, 255, 230)
        Note right of –ü: üìö –û–±–æ–≥–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç
        –ü-->>–ü: dt://catalogs/levels<br/>‚Üí —Å–æ–æ—Ç–Ω–æ—Å–∏—Ç –≤—Ä–µ–º—è —Å —É—Ä–æ–≤–Ω–µ–º —É—á–µ–Ω–∏–∫–∞
    end

    –ü-->>–ß: "–ó–∞ –Ω–µ–¥–µ–ª—é –≤—ã –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏<br/>9—á 48–º–∏–Ω ‚Äî –ø–æ 1—á 24–º–∏–Ω –≤ –¥–µ–Ω—å"
```

**–õ–µ–≥–µ–Ω–¥–∞:**
- üîµ –°–∏–Ω–∏–π –±–ª–æ–∫ ‚Äî —Ä–µ—Å—É—Ä—Å—ã, —á–∏—Ç–∞–µ–º—ã–µ –ü—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–º
- üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π –±–ª–æ–∫ ‚Äî —Ä–µ—Å—É—Ä—Å—ã, —á–∏—Ç–∞–µ–º—ã–µ MCP-—Å–µ—Ä–≤–µ—Ä–æ–º
- üü¢ –ó–µ–ª—ë–Ω—ã–π –±–ª–æ–∫ ‚Äî –æ–±–æ–≥–∞—â–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –ø–µ—Ä–µ–¥ –≤—ã–≤–æ–¥–æ–º —á–µ–ª–æ–≤–µ–∫—É

### üìò –í–∞–∂–Ω—ã–π –ø—Ä–∏–Ω—Ü–∏–ø: **–ü—Ä–æ–≤–æ–¥–Ω–∏–∫ –Ω–µ –∑–Ω–∞–µ—Ç –æ –±–∞–∑–µ, MCP –Ω–µ –∑–Ω–∞–µ—Ç –æ —Å–º—ã—Å–ª–µ**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                 | –ß—Ç–æ –æ–Ω –∑–Ω–∞–µ—Ç                           | –ß–µ–≥–æ –æ–Ω –Ω–µ –∑–Ω–∞–µ—Ç                |     |
| ------------------------- | -------------------------------------- | ------------------------------- | --- |
| **–ü—Ä–æ–≤–æ–¥–Ω–∏–∫ (–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç)** | –ö–∞–∫–∏–µ tool‚Äô—ã –µ—Å—Ç—å, –∏ –∫–æ–≥–¥–∞ –∏—Ö –≤—ã–∑—ã–≤–∞—Ç—å | –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω—ã —Ç–∞–±–ª–∏—Ü—ã –∏ SQL      |     |
| **MCP-—Å–µ—Ä–≤–µ—Ä**            | –ö–∞–∫ –¥–æ—Å—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã             | –ü–æ—á–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —ç—Ç–æ —Å–ø—Ä–æ—Å–∏–ª |     |
| **–¶–∏—Ñ—Ä–æ–≤–æ–π –¥–≤–æ–π–Ω–∏–∫ (–ë–î)** | –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏                | –ö–∞–∫ –∏—Ö –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å         |     |

### ‚úÖ –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

|–í–æ–ø—Ä–æ—Å|–û—Ç–≤–µ—Ç|
|---|---|
|**–ö–∞–∫ –ü—Ä–æ–≤–æ–¥–Ω–∏–∫ –∑–Ω–∞–µ—Ç, –∫–∞–∫–æ–π tool –≤—ã–∑–≤–∞—Ç—å?**|–ò–∑ `mcp-manifest.json`, –≥–¥–µ –∑–∞–¥–µ–∫–ª–∞—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ tools –∏ –∏—Ö –æ–ø–∏—Å–∞–Ω–∏—è.|
|**–ö–∞–∫ MCP –∑–Ω–∞–µ—Ç, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤–∑—è—Ç—å?**|–ò–∑ –∫–æ–¥–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ tool (handler), –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –Ω—É–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î Digital Twin.|
|**–ö–∞–∫ –æ–Ω –∑–Ω–∞–µ—Ç —Å–º—ã—Å–ª –º–µ—Ç—Ä–∏–∫–∏?**|–ò–∑ —Ä–µ—Å—É—Ä—Å–∞ `dt://catalogs/metrics`.|
|**–ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏?**|–†–∞–∑–¥–µ–ª—è—Ç—å manifest (–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã), handler (–ª–æ–≥–∏–∫–∞), –∏ resources (–æ–Ω—Ç–æ–ª–æ–≥–∏—é).|

üëâ –ò—Ö —Å–≤—è–∑—ã–≤–∞–µ—Ç **–æ–Ω—Ç–æ–ª–æ–≥–∏—è —á–µ—Ä–µ–∑ Resources** –∏ **–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —á–µ—Ä–µ–∑ Tools**.
## üéØ –¶–µ–ª—å

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **MCP –º–µ—Ç–æ–¥ –¶–∏—Ñ—Ä–æ–≤–æ–≥–æ –¥–≤–æ–π–Ω–∏–∫–∞**  
`dt.get_time_invested_summary`,  
–∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–∏–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"week"`, `"month"`, `"day"`)  
–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

- –æ–±—â–µ–µ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞ –ø–µ—Ä–∏–æ–¥;
    
- —Å—Ä–µ–¥–Ω–µ–µ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞ –¥–µ–Ω—å;
    
- –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç, –æ—Ö–≤–∞—á–µ–Ω–Ω—ã–π —Ä–∞—Å—á—ë—Ç–æ–º;
    
- –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö (`coverage`, `sources`, `last_sync`).
    

---

# üìò–ö—Ä–∞—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è

## üß© 1. JSON-RPC —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ MCP-–∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞

**–ó–∞–ø—Ä–æ—Å –æ—Ç –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ (ChatGPT / –ü—Ä–æ–≤–æ–¥–Ω–∏–∫–∞) –∫ MCP Digital Twin:**

```json
{
  "jsonrpc": "2.0",
  "method": "dt.get_time_invested_summary",
  "params": {
    "period": "week"
  }
}
```

**–û—Ç–≤–µ—Ç –æ—Ç MCP –¶–∏—Ñ—Ä–æ–≤–æ–≥–æ –¥–≤–æ–π–Ω–∏–∫–∞:**

```json
{
  "jsonrpc": "2.0",
  "result": {
    "period": "week",
    "total_hours": 9.8,
    "average_per_day": 1.4,
    "start_date": "2025-12-15",
    "end_date": "2025-12-21",
    "data_quality": {
      "coverage_ratio": 0.93,
      "sources": ["manual_log", "calendar"],
      "last_sync_at": "2025-12-21T23:59:00Z"
    }
  }
}
```

---

## ‚öôÔ∏è 2. –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ MCP-—Å–µ—Ä–≤–µ—Ä–∞ Digital Twin (–Ω–∞ Python / FastAPI)

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –º–æ–∂–Ω–æ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ  
`https://digital-twin-mcp.aisystant.workers.dev/mcp`.

```python
from fastapi import FastAPI, Request
from datetime import datetime, timedelta
import json

# MCP Digital Twin server
app = FastAPI(title="Digital Twin MCP Server")

# –ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –¶–∏—Ñ—Ä–æ–≤–æ–≥–æ –¥–≤–æ–π–Ω–∏–∫–∞ (activity_log)
activity_log = [
    {"timestamp": "2025-12-15T10:00:00", "duration_minutes": 60},
    {"timestamp": "2025-12-16T09:30:00", "duration_minutes": 40},
    {"timestamp": "2025-12-17T19:00:00", "duration_minutes": 80},
    {"timestamp": "2025-12-19T20:00:00", "duration_minutes": 60},
    {"timestamp": "2025-12-21T10:00:00", "duration_minutes": 50}
]

@app.post("/mcp")
async def mcp_endpoint(request: Request):
    body = await request.json()
    method = body.get("method")
    params = body.get("params", {})

    # –û–±—Ä–∞–±–æ—Ç–∫–∞ MCP-–≤—ã–∑–æ–≤–∞ Digital Twin
    if method == "dt.get_time_invested_summary":
        return await dt_get_time_invested_summary(params)
    else:
        return {
            "jsonrpc": "2.0",
            "error": {"code": -32601, "message": "Method not found"}
        }

async def dt_get_time_invested_summary(params):
    period = params.get("period", "week")
    now = datetime.utcnow()

    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≥—Ä–∞–Ω–∏—Ü—ã –ø–µ—Ä–∏–æ–¥–∞
    if period == "week":
        start = now - timedelta(days=7)
    elif period == "month":
        start = now - timedelta(days=30)
    else:
        start = now - timedelta(days=1)

    # –§–∏–ª—å—Ç—Ä—É–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¶–∏—Ñ—Ä–æ–≤–æ–≥–æ –¥–≤–æ–π–Ω–∏–∫–∞ –ø–æ –ø–µ—Ä–∏–æ–¥—É
    sessions = [a for a in activity_log if datetime.fromisoformat(a["timestamp"]) >= start]

    total_minutes = sum(a["duration_minutes"] for a in sessions)
    total_hours = round(total_minutes / 60, 2)
    days = max(1, (now - start).days)
    average_per_day = round(total_hours / days, 2)

    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º MCP-–æ—Ç–≤–µ—Ç
    return {
        "jsonrpc": "2.0",
        "result": {
            "period": period,
            "total_hours": total_hours,
            "average_per_day": average_per_day,
            "start_date": start.strftime("%Y-%m-%d"),
            "end_date": now.strftime("%Y-%m-%d"),
            "data_quality": {
                "coverage_ratio": 0.93,
                "sources": ["manual_log", "calendar"],
                "last_sync_at": now.isoformat()
            }
        }
    }
```

---

## üß† 3. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ (MCP Digital Twin)

**1Ô∏è‚É£ –ß–µ–ª–æ–≤–µ–∫ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ü—Ä–æ–≤–æ–¥–Ω–∏–∫–∞:**

> ¬´–°–∫–æ–ª—å–∫–æ —è –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –≤—Ä–µ–º–µ–Ω–∏ –∑–∞ –Ω–µ–¥–µ–ª—é –∏ –≤ —Å—Ä–µ–¥–Ω–µ–º –∑–∞ –¥–µ–Ω—å?¬ª

**2Ô∏è‚É£ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –¶–∏—Ñ—Ä–æ–≤–æ–≥–æ –¥–≤–æ–π–Ω–∏–∫–∞ (–ü—Ä–æ–≤–æ–¥–Ω–∏–∫):**  
—Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç, —á—Ç–æ –≤–æ–ø—Ä–æ—Å –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ **–º–µ—Ç—Ä–∏–∫–µ –≤—Ä–µ–º–µ–Ω–∏**,  
–∏ –≤—ã–∑—ã–≤–∞–µ—Ç **MCP tool**:

```json
{"jsonrpc":"2.0","method":"dt.get_time_invested_summary","params":{"period":"week"}}
```

**3Ô∏è‚É£ MCP Digital Twin –≤—ã—á–∏—Å–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–≤–µ—á–∞–µ—Ç:**

```json
{"jsonrpc":"2.0","result":{"total_hours":9.8,"average_per_day":1.4}}
```

**4Ô∏è‚É£ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —ç—Ç–æ –≤ –æ—Ç–≤–µ—Ç —á–µ–ª–æ–≤–µ–∫—É:**

> ¬´–ó–∞ –Ω–µ–¥–µ–ª—é –≤—ã –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏ 9 —á–∞—Å–æ–≤ 48 –º–∏–Ω—É—Ç ‚Äî –≤ —Å—Ä–µ–¥–Ω–µ–º –ø–æ 1 —á–∞—Å—É 24 –º–∏–Ω—É—Ç—ã –≤ –¥–µ–Ω—å.  
> –î–∞–Ω–Ω—ã–µ —Å–æ–±—Ä–∞–Ω—ã –∏–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∏ —Ä—É—á–Ω—ã—Ö –ª–æ–≥–æ–≤, –ø–æ–∫—Ä—ã—Ç–∏–µ ‚Äî 93%.¬ª

---

## üí¨ 4. –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è MCP Digital Twin

- –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `period: "month"` –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ (`custom_start` / `custom_end`);
    
- –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–±–∏–≤–∫–∏ –ø–æ –¥–Ω—è–º (`breakdown`);
    
- –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤ MCP –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏;
    
- –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ—Å—É—Ä—Å–æ–º `dt://catalogs/metrics` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫–∏.
    

---

# üìò –ü–æ–ª–Ω–∞—è –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ MCP Digital Twin

## **Tool:** `dt.get_time_invested_summary`

(–¥–æ–∫—É–º–µ–Ω—Ç –ø–æ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–º—É —à–∞–±–ª–æ–Ω—É MCP Digital Twin)

---

### 0) –ó–∞–≥–æ–ª–æ–≤–æ–∫

**Tool name:** `dt.get_time_invested_summary`  
**–ü–æ–¥—Å–∏—Å—Ç–µ–º–∞-–≤–ª–∞–¥–µ–ª–µ—Ü:** MCP –¶–∏—Ñ—Ä–æ–≤–æ–π –¥–≤–æ–π–Ω–∏–∫ (Digital Twin MCP)  
**–°—Ç–∞—Ç—É—Å:** `stable`  
**–í–µ—Ä—Å–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞:** `v1.0`  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** `2025-12-21`  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –ö–æ–º–∞–Ω–¥–∞ –ü—Ä–æ–≤–æ–¥–Ω–∏–∫ / –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –£—á–µ–Ω–∏–∫–∞  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

- `dt://catalogs/metrics` (–∫–∞—Ç–∞–ª–æ–≥ –º–µ—Ç—Ä–∏–∫)
    
- `dt://schemas/activity_event` (—Å—Ö–µ–º–∞ —Å–æ–±—ã—Ç–∏–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)
    
- `dt://policies/data_quality` (–ø—Ä–∞–≤–∏–ª–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö)
    

---

### 1) –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ **–∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –¥–∞–Ω–Ω—ã—Ö MCP Digital Twin:  
–æ–±—â–µ–µ –≤—Ä–µ–º—è, —Å—Ä–µ–¥–Ω–µ–µ –≤ –¥–µ–Ω—å, –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –∏ –∫–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö.

---

### 2) –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

**Use when:**

- –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å–≤–æ–¥–∫—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–∞ –Ω–µ–¥–µ–ª—é, –º–µ—Å—è—Ü, –¥–µ–Ω—å;
    
- –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–∏—Ç–º–∞ —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏—è –∏ ‚Äú–Ω–∞–ª—ë—Ç–∞ —á–∞—Å–æ–≤‚Äù.
    

**Do NOT use when:**

- —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π ‚Üí `dt.list_activity_events`;
    
- –Ω—É–∂–µ–Ω –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ ‚Üí `dt.get_learning_efficiency`.
    

---

### 3) –ö–æ–Ω—Ç—Ä–∞–∫—Ç –≤—ã–∑–æ–≤–∞ (Input / Output Schema)

**Input:**

```json
{
  "period": "week",
  "timezone": "Europe/Moscow"
}
```

**Output:**

```json
{
  "period": "week",
  "total_hours": 9.8,
  "average_per_day": 1.4,
  "start_date": "2025-12-15",
  "end_date": "2025-12-21",
  "data_quality": {
    "coverage_ratio": 0.93,
    "sources": ["manual_log", "calendar"]
  }
}
```

---

### 4) –°–µ–º–∞–Ω—Ç–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö MCP Digital Twin

- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Äú–∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è‚Äù = –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã —Ç–∏–ø–∞ `learning`, `reading`, `project_work`.
    
- **–ò—Å–∫–ª—é—á–µ–Ω–∏—è:** `sleep`, `idle`, `transport`.
    
- **–ï–¥–∏–Ω–∏—Ü—ã:** –º–∏–Ω—É—Ç—ã (—Ü–µ–ª–æ–µ).
    
- **Timezone:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    

---

### 5) –ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö (`data_quality`)

- `coverage_ratio` ‚Äî –ø–æ–ª–Ω–æ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö;
    
- `sources` ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (`timer`, `manual_log`, `calendar`);
    
- `last_sync_at` ‚Äî –º–æ–º–µ–Ω—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.
    

---

### 6) –û—à–∏–±–∫–∏

|–ö–æ–¥|–û–ø–∏—Å–∞–Ω–∏–µ|
|---|---|
|`INVALID_ARGUMENT`|–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–µ—Ä–∏–æ–¥–∞ –∏–ª–∏ –¥–∞—Ç—ã|
|`NO_DATA`|–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥|
|`PARTIAL_DATA`|–ü–æ–∫—Ä—ã—Ç–∏–µ < 80%|
|`UNAUTHORIZED`|–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞|
|`INTERNAL`|–û—à–∏–±–∫–∞ MCP Digital Twin|

---

### 7) –ü—Ä–∏–º–µ—Ä MCP-–≤—ã–∑–æ–≤–∞

```json
{
  "jsonrpc": "2.0",
  "method": "dt.get_time_invested_summary",
  "params": { "period": "week" }
}
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "jsonrpc": "2.0",
  "result": {
    "total_hours": 9.8,
    "average_per_day": 1.4,
    "start_date": "2025-12-15",
    "end_date": "2025-12-21"
  }
}
```

---

### 8) –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã MCP Digital Twin

|URI|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|---|---|
|`dt://catalogs/metrics`|–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ ‚Äú–∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è‚Äù|
|`dt://schemas/activity_event`|—Å—Ö–µ–º–∞ —Å–æ–±—ã—Ç–∏–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏|
|`dt://policies/data_quality`|–ø—Ä–∞–≤–∏–ª–∞ –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö|
|`dt://changelog`|–∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π MCP –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤|

---

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Ç–µ–ø–µ—Ä—å **–≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω–æ, —á—Ç–æ —Ä–µ—á—å –∏–¥—ë—Ç –æ MCP –¶–∏—Ñ—Ä–æ–≤–æ–≥–æ –¥–≤–æ–π–Ω–∏–∫–∞ (Digital Twin)**:  
‚Äî –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –º–µ—Ç–æ–¥–æ–≤ (`dt.get_...`),  
‚Äî –≤ –∫–æ–¥–µ,  
‚Äî –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏,  
‚Äî –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö –∏ —Ä–µ—Å—É—Ä—Å–∞—Ö.

---

–•–æ—Ç–∏—Ç–µ, —è –¥–æ–±–∞–≤–ª—é —Å—é–¥–∞ **–æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ `dt://catalogs/metrics`**,  
—á—Ç–æ–±—ã –ø–æ–ª—É—á–∏–ª—Å—è –ø–æ–ª–Ω—ã–π –ø–∞–∫–µ—Ç MCP Digital Twin: tool + resource?