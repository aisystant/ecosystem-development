---
title: "Общая архитектура ИТ-платформы"
family: F8
cell: "3.2"
version: v2.0
status: active
date_created: "2025-12-18"
date_modified: "2025-12-18"
related:
  - "Концепция использования ИТ-платформы Aisystant 3.2"
  - "Карта ИТ-систем 3.2"
  - "Глоссарий хранилища 0.1"
description: "Полная архитектура ИТ-платформы Aisystant: слоистая структура, функциональное взаимодействие систем, классификация по ai_role. Платформа как прозрачный ящик"
type: doc
layer: architecture
scope: local-edge
---

# Общая архитектура ИТ-платформы

## 0. Назначение документа

Документ описывает **полную архитектуру ИТ-платформы Aisystant** как **прозрачный ящик**: внутреннее устройство, слоистую структуру, функциональное взаимодействие всех подсистем и классификацию компонентов по роли ИИ (`ai_role`).

Концепция использования платформы с точки зрения пользователя (платформа как черный ящик) описана в [[Концепция использования ИТ-платформы Aisystant 3.2]].

**Адресаты:**
- Архитекторы и технические лидеры
- Разработчики подсистем
- DevOps и инфраструктурная команда
- Новые участники технической команды

---

## 1. Слоистая архитектура платформы

### 1.1. Пять слоев платформы

```
┌─────────────────────────────────────────────────────────────┐
│  СЛОЙ 5: ИНТЕРФЕЙСЫ (точки входа для пользователей)         │
│  ChatGPT Apps │ Telegram │ Web LMS │ Клуб │ Mobile │ API    │
└─────────────────────────────────────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────────────┐
│  СЛОЙ 4: ИИ-АССИСТЕНТЫ (человеко-ориентированные)           │
│  Проводник │ Ассистент Интеллектуала │ Apps SDK │ ...       │
└─────────────────────────────────────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────────────┐
│  СЛОЙ 3: ИИ-АГЕНТЫ (системно-ориентированные)               │
│  17 агентов: Orchestrator │ Ingestor │ Planner │ ...        │
└─────────────────────────────────────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────────────┐
│  СЛОЙ 2: ИИ-СИСТЕМЫ (ai_role: core)                         │
│  Memory Bank │ Epistemic Graph │ Proof-of-Impact            │
└─────────────────────────────────────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────────────┐
│  СЛОЙ 1: ДЕТЕРМИНИРОВАННЫЕ ИТ-СИСТЕМЫ + ИНФРАСТРУКТУРА      │
│  Twin │ Hub │ CRM │ LMS │ Биллинг │ ORY │ Event Bus │ MCP   │
└─────────────────────────────────────────────────────────────┘
```

### 1.2. Описание слоев

| Слой | Назначение | ai_role | Компоненты |
|------|------------|---------|------------|
| **5. Интерфейсы** | Точки входа для пользователей | — | ChatGPT Apps, Telegram, Web LMS, Клуб, API |
| **4. ИИ-ассистенты** | Диалог с человеком, персонализация | core | Проводник, Ассистент Интеллектуала, Apps SDK |
| **3. ИИ-агенты** | Автономное выполнение функций | core | 17 агентов (см. ниже) |
| **2. ИИ-системы** | Инференс-зависимые подсистемы | core | Memory Bank, ESG, Proof-of-Impact |
| **1. Инфраструктура** | Детерминированные системы | none/feature | Twin, Hub, CRM, LMS, ORY, Event Bus |

---

## 2. Ключевые архитектурные механизмы

### 2.1. Механизм 1: Цифровой двойник

**Назначение:** Единое хранилище состояния человека — траектория развития, цели, навыки, активности.

**Что хранит:**
- **События (E.*)** — все действия (обучение, задания, активность)
- **Слоты (SLT.*)** — время, выделенное на развитие
- **Рабочие продукты (W.*)** — артефакты (конспекты, модели)
- **Маршруты (ROUTE.*)** — планы и шаги развития
- **Ступени (STAGE.*)** — текущий уровень
- **Метрики (MET.*)** — агрегированные показатели

**Как используется:**

```
┌─────────────────────────────────────────────────────────────┐
│                    ЦИФРОВОЙ ДВОЙНИК                          │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│  │ События │ │  Слоты  │ │Артефакты│ │Маршруты │           │
│  └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘           │
└───────┼──────────┼──────────┼──────────┼───────────────────┘
        │          │          │          │
        ▼          ▼          ▼          ▼
   ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐
   │Проводник│ │Аналитик│ │Методист│ │Оценщик │
   └────────┘ └────────┘ └────────┘ └────────┘
```

### 2.2. Механизм 2: Токены за активность

**Назначение:** Вознаграждение за действия по развитию себя и экосистемы.

**Поток данных:**

```
┌────────────┐    ┌────────────┐    ┌────────────┐    ┌────────────┐
│   LMS/Клуб │───▶│ Activity   │───▶│Proof-of-   │───▶│   Token    │
│  (события) │    │    Hub     │    │  Impact    │    │  Economy   │
└────────────┘    └────────────┘    └────────────┘    └────────────┘
                       │                  │                  │
                       ▼                  ▼                  ▼
                 Лог событий        ML-оценка          Начисление
                                  воздействия          токенов
```

**Этапы:**
1. **Источники** — LMS, Клуб, CRM генерируют события
2. **Сбор** — Activity Hub собирает и нормализует события
3. **Оценка** — Proof-of-Impact оценивает воздействие через ML
4. **Начисление** — Token Economy начисляет токены на кошелек

---

## 3. Архитектурные принципы

### 3.1. Модульность и слабая связанность

- Каждая система решает **чётко определённый круг задач**
- Взаимодействие через **явные API и события**
- **Loose coupling** через Event Bus и MCP (Model Context Protocol)
- Независимое масштабирование подсистем

### 3.2. Единая модель данных

Сквозные сущности:
- **User** — пользователь экосистемы
- **DigitalTwin** — цифровой двойник с целями, навыками, контекстом
- **Episteme** — знания, документы, модели
- **Work** — трассы выполнения работ
- **Evidence** — доказательства воздействия
- **Activity** — события и активности

### 3.3. Классификация по роли ИИ

Все компоненты классифицируются по метке `ai_role`:
- **none** — детерминированная ИТ-система (ИИ отсутствует)
- **feature** — ИТ-система с ИИ-фичей (ИИ улучшает, но не ядро)
- **core** — ИИ-система (без инференса система не работает)

Подробнее: [[Глоссарий хранилища 0.1#10. Термины классификации систем и ИИ]]

---

## 4. Полный список ИТ-систем экосистемы

### 4.1. Детерминированные ИТ-системы (ai_role: none/feature)

| № | Система | ai_role | Назначение | Технологии | Интеграции |
|---|---------|---------|------------|------------|------------|
| **4.3** | **Клуб (Forum)** | feature | Сообщество практиков, события, нетворкинг, культурный слой | Discourse/Flarum + AI-рекомендации | Activity Hub, CRM, LMS |
| **4.4** | **Платформа обучения (LMS)** | feature | Онлайн-курсы, модули, прогресс обучения, сертификация | Moodle/Canvas + AI-подсказки | Personal Path, Activity Hub, Digital Twin |
| **4.6** | **Хаб активностей (Activity Hub)** | none | Единый лог всех событий: обучение, проекты, публикации, продажи, ревью | Kafka, Flink, Event Store | Memory Bank, Digital Twin, Proof-of-Impact |
| **4.7** | **CRM** | none | Управление взаимодействием с участниками: лиды, воронки, коммуникации | PostgreSQL, API | Клуб, Биллинг, ORY |
| **4.8** | **Системы приёма оплаты фиатом** | none | Приём фиатных платежей (карты, банки, Stripe, PayPal) | Stripe, PayPal, банковские API | Биллинг, CRM |
| **4.9** | **Биллинг** | none | Тарификация, подписки, счета, управление платежами | PostgreSQL, Billing Engine | Fiat Payment, Token Economy, CRM |
| **4.10** | **Финансовая система токеномики** | none | Эмиссия токенов, распределение, переводы, внутренняя биржа, treasury | Blockchain/Ledger, Rules Engine | Proof-of-Impact, Activity Hub, Биллинг |
| **4.11** | **Цифровой двойник (Digital Twin)** | none | Профиль участника: цели/OKR, навыки, предпочтения, расписание, контекст | SurrealDB, MCP | Personal Path, Activity Hub, ORY |
| **4.13** | **Система управления кейсами** | none | Управление проектами, задачами, командами, Pomodoro, time budgeting, геймификация | Project Management System | Activity Hub, Personal Path, CRM, Proof-of-Impact |
| **4.14** | **Система идентификации и доступа (ORY)** | none | SSO, управление профилями, роли/группы, контроль доступа (ACL) | ORY Hydra, Kratos, Keto | Все сервисы экосистемы |

**Итого детерминированных ИТ-систем:** 10

---

### 4.2. ИИ-Системы (ai_role: core)

| № | ИИ-Система | ai_role | Назначение | Технологии | Интеграции |
|---|------------|---------|------------|------------|------------|
| **4.12** | **Единое хранилище знаний (Memory Bank)** | core | Централизованное хранилище знаний, эпистем, методописаний, трасс работ, RAG | Vector DB, SurrealDB, ML Embeddings | ОС ИИ, ESG, Activity Hub |
| **4.16** | **Эпистемический граф и статусы (ESG)** | core | Отслеживание эпистемических статусов артефактов, граф доказательств, CHR-профили, метрики CreativitySpace | Neo4j/SurrealDB, ML Models | Memory Bank, Activity Hub, Proof-of-Impact |
| **4.17** | **Система Proof-of-Impact** | core | Начисление токенов за доказуемое воздействие через ML, трассировка Work→Evidence→Metrics | ML Models, Rules Engine | Token Economy, Activity Hub, ESG |

**Примечание:** Эти системы требуют инференса моделей для основной функции — без ML они не выполняют свое назначение.

**Итого ИИ-систем:** 3

---

### 4.3. ИИ-Ассистенты (ai_role: core)

| № | ИИ-Ассистент | ai_role | Назначение | ИИ-модель | Интеграции |
|---|--------------|---------|------------|-----------|------------|
| **4.5** | **Проводник по персональному маршруту** | core | Построение персональных траекторий развития на основе целей, навыков, диалог с человеком | GPT-4o / Claude 3.5 | Digital Twin, LMS, Activity Hub |
| **4.15** | **Apps SDK и маркетплейс ассистентов** | core | Публикация ИИ-ассистентов через декларативный SDK, маркетплейс | MCP, GPT-4o / Claude 3.5 | ОС ИИ, Биллинг, Token Economy |

**Примечание:** Дополнительные ассистенты (Интеллектуал, Профессионал, Исследователь, Просветитель) планируются.

**Итого ИИ-ассистентов:** 2 (активных)

---

### 4.4. Операционная система ИИ-платформы (ai_role: feature)

| № | Система | ai_role | Назначение | Технологии | Интеграции |
|---|---------|---------|------------|------------|------------|
| **4.2** | **Операционная система ИИ-платформы** | feature | Оркестрация мультиагентных сценариев, планирование вызовов инструментов, управление контекстом и целями | Kubernetes, Event Bus, MCP, AI Orchestration | ORY, Apps SDK, Memory Bank, Activity Hub |

**Примечание:** ОС ИИ классифицируется как `ai_role: feature`, так как может работать без ИИ в режиме простой оркестрации, но ИИ значительно улучшает планирование и оптимизацию.

---

### 4.5. ИИ-Агенты (ai_role: core)

Детальное описание 17 ИИ-агентов см. в [[Карта ИТ-систем 3.2]].

**Группы агентов:**

#### Группа 1: Ядро выполнения и координации
- `AGT.SessionOrchestrator` — оркестрация сессий
- `AGT.PolicyGatekeeper` — проверка прав и политик
- `AGT.ToolRouter` — маршрутизация инструментов (MCP Hub)

#### Группа 2: Сбор фактов (ingestion → Twin)
- `AGT.ActivityIngestor` — сбор событий из систем
- `AGT.ArtifactExtractor` — извлечение артефактов из текстов
- `AGT.DataQualitySteward` — контроль качества данных

#### Группа 3: Обучение и развитие (Twin → план → действие → Twin)
- `R.GrowthGuide` + `AGT.RouteGuide` — формирование маршрута
- `AGT.TrajectoryPlanner` — планирование траектории
- `AGT.DailyAssignmentBuilder` — генерация заданий дня
- `AGT.ContentPersonalizer` — персонализация контента
- `R.Evaluator` + `AGT.Evaluator` — оценка артефактов
- `R.Methodist` + `AGT.Methodist` — улучшение методики

#### Группа 4: Поддержка ритма и взаимодействия
- `AGT.RhythmKeeper` — мониторинг ритма, напоминания
- `AGT.SupportTriage` — триаж запросов поддержки

#### Группа 5: Аналитика, наблюдаемость, безопасность
- `AGT.ProgressAnalyst` — анализ прогресса
- `AGT.AnomalyRiskMonitor` — мониторинг аномалий
- `AGT.AuditTrace` — аудит операций

**Итого ИИ-агентов:** 17

---

## 5. Сводная статистика компонентов

| Тип компонента | Количество | ai_role | Статус |
|----------------|------------|---------|--------|
| **Детерминированные ИТ-системы** | 10 | none/feature | ✅ Активны/В разработке |
| **ИИ-Системы** | 3 | core | ✅ 1 активна, 2 планируются |
| **ИИ-Ассистенты** | 2 (+5 планируется) | core | ✅ 2 активных |
| **ИИ-Агенты** | 17 | core | ✅ 7 в разработке, 5 прототипов, 5 планируются |
| **ОС ИИ-платформы** | 1 | feature | ✅ В разработке |
| **ВСЕГО** | **33** | — | — |

---

## 6. Интеграционная матрица

### 6.1. Центральные хабы (многие системы интегрируются)

- **Activity Hub (4.6)** — собирает события от всех подсистем
- **Memory Bank (4.12)** — предоставляет контекст всем ИИ-агентам
- **ORY (4.14)** — единая аутентификация для всех сервисов
- **Digital Twin (4.11)** — профиль пользователя используется повсеместно
- **ОС ИИ (4.2)** — оркестрирует все ИИ-компоненты

### 6.2. Ключевые цепочки обработки

#### Обучение
```
LMS (4.4) → Personal Path (4.5) → Digital Twin (4.11) → Activity Hub (4.6)
```

#### Платежи
```
CRM (4.7) → Биллинг (4.9) → [Fiat Payment (4.8) / Token Economy (4.10)]
```

#### Доказательства и токены
```
Activity Hub (4.6) → ESG (4.16) → Proof-of-Impact (4.17) → Token Economy (4.10)
```

#### ИИ-оркестрация
```
ОС ИИ (4.2) → Apps SDK (4.15) → Memory Bank (4.12) → Activity Hub (4.6)
```

---

## 7. Технологический стек

### 7.1. Базы данных
- **SurrealDB** — основное хранилище (Digital Twin, Memory Bank)
- **PostgreSQL** — реляционные данные (CRM, Биллинг)
- **Neo4j** — графовые структуры (Epistemic Graph)
- **Vector DB** — эмбеддинги для RAG (Memory Bank)

### 7.2. Event-driven архитектура
- **Kafka** — шина событий
- **Flink** — потоковая обработка
- **Event Store** — event sourcing

### 7.3. ИИ и ML
- **GPT-4o / Claude 3.5** — LLM для ассистентов и агентов
- **ML Models** — специализированные модели (ESG, Proof-of-Impact)
- **MCP (Model Context Protocol)** — протокол взаимодействия ИИ-компонентов

### 7.4. Инфраструктура
- **Kubernetes** — оркестрация контейнеров
- **ORY (Hydra, Kratos, Keto)** — идентификация и доступ
- **Observability** — мониторинг, логи, трассировка

---

## 8. Принципы безопасности и управления рисками

### 8.1. Для детерминированных ИТ-систем (ai_role: none/feature)
- Стандартные практики безопасности
- Контроль доступа через ORY
- Аудит операций

### 8.2. Для ИИ-систем (ai_role: core)

**Обязательные контуры:**
- Оценка качества модели
- Мониторинг поведения модели
- Управление рисками ИИ
- Human-in-the-loop (где требуется)
- Окна регрессии для валидации (Proof-of-Impact)

**Анти-спам и контроль:**
- Бюджеты и политики в ОС ИИ
- Конформанс-чеклисты
- Пороги и алерты

---

## 9. Roadmap развития архитектуры

### v1.0 (MVP) — 2025 Q1-Q2
- ✅ Базовые детерминированные системы (4.3-4.11, 4.13-4.14)
- 🔄 ОС ИИ-платформы (4.2)
- 🔄 Проводник (4.5)

### v1.1 — 2025 Q3-Q4
- Memory Bank (4.12)
- ESG (4.16)
- Proof-of-Impact (4.17)
- Apps SDK (4.15)
- 17 ИИ-агентов

### v2.0 — 2026+
- Дополнительные ИИ-ассистенты (Интеллектуал, Профессионал, Исследователь, Просветитель)
- Федеративная архитектура
- Мультирегиональность
- Горизонтальное масштабирование

---

## 10. Связанные документы

- [[Концепция использования ИТ-платформы Aisystant 3.2]] — платформа как черный ящик, сценарии использования
- [[Карта ИТ-систем 3.2]] — полный реестр всех компонентов
- [[Глоссарий хранилища 0.1]] — термины классификации систем и ИИ

---

## Changelog / История версий

| Дата | Версия | Автор | Изменения |
|------|--------|-------|-----------|
| 2025-12-18 | v1.0 | Claude | Создан документ. Полная классификация 33 компонентов по ai_role |
| 2025-12-18 | v2.0 | Claude | Добавлена слоистая архитектура (5 слоев), механизмы Цифрового двойника и Токенов. Документ переработан как "прозрачный ящик" |
