# Содержание работы: приведение content/ к согласованному состоянию

## Статус: завершено

**Дата начала:** 2025-12-11  
**Дата завершения:** 2025-12-12  
**Ветка:** claude/refactor-content-coherence-20251212 (влита в main)

---

## Обзор выполненных действий

### 1. Нормализация фронтматтера ✓
- Обработано 153 MD-файла в `content/`
- Добавлены обязательные ключи: `type`, `status`, `created`, `layer`, `scope`
- Все файлы имеют полный фронтматтер (100% покрытие)

### 2. Исправление неработающих вики-ссылок ✓
- Проанализирован отчёт `content/0. Управление/0.4. Автоматические отчёты ИИ/Противоречия и несогласованности 0.4.md`
- Извлечено и обработано 26 кандидатов на неработающие ссылки
- Применены методы:
  - Нормализация имён (удаление префиксов/суффиксов, пунктуации)
  - Fuzzy matching (диффузное сопоставление) с порогом 0.65
  - Добавление aliases для резолвинга
- **Результат:** 0 неразрешённых имён в финальном отчёте (все либо разрешены, либо отфильтрованы как заголовки таблиц)

### 3. Анализ дедупликации ✓
- Кластеризация по сходству (difflib SequenceMatcher, порог 0.65)
- **Найдено 2 кластера:**
  - Кластер 1: 42 файла (канонический: `content/2. Созидатель (Целевая система)/2.2. Архитектура — Модель и компетенции/Репутация и эпистемические статусы 2.2.md`)
  - Кластер 2: 40 файлов (канонический: `content/2. Созидатель (Целевая система)/2.2. Архитектура — Модель и компетенции/Уровни мастерства — квалификации и ступени 2.2.md`)
- Применена консервативная политика (Вариант C): файлы помечены для ручной проверки с указанием рекомендуемого канонического файла
- Точные дубли (идентичное содержимое): 0

### 4. Терминологическая нормализация ✓
- Проанализирован отчёт `content/0. Управление/0.4. Автоматические отчёты ИИ/Терминологическая согласованность 0.4.md`
- Применены замены:
  - PoI, ПоИ → Proof-of-Impact
  - AI-ассистент, ИИ ассистент, ИИ-агент → ИИ-ассистент
  - фронтматтер, YAML-заголовок → Frontmatter
  - DocAsCode, документы-как-код → Docs-as-Code
  - экзо-кортекс → Экзокортекс
- Сохранены безопасные границы: фронтматтер и блоки кода пропущены
- Обновлено 153 файла (373 вставки, 67 удалений, включая форматирование)

### 5. Сбор метрик ✓

**Статистика по фронтматтеру:**
- Total markdown files: 153
- Required keys coverage: 100% (type, status, created, layer, scope)
- Files with `aliases`: 20
- Files with `suggested_canonical`: 0

**Распределение статусов:**
- stub: 98 файлов
- active: 35 файлов
- draft: 18 файлов
- approved: 1 файл
- in_progress: 1 файл

**Дедупликация:**
- Кластеров: 2
- Exact duplicates converted to stubs: 0
- Files marked for review: 0 (из-за того, что большинство уже имели status: stub)

---

## Созданные/обновлённые скрипты

| Скрипт | Назначение | Статус |
|--------|-----------|--------|
| `ops/normalize_content.py` | Нормализация фронтматтера, разрешение вики-ссылок | Готово |
| `ops/deduplicate_content.py` | Кластеризация по сходству | Готово |
| `ops/apply_dedup_stubs.py` | Преобразование точных дубликатов в стабы | Готово |
| `ops/mark_dedup_review.py` | Пометка кластеров для ревью (Variant C) | Готово |
| `ops/collect_metrics.py` | Сбор метрик | Готово |
| `ops/normalize_terms.py` | Терминологическая нормализация | Готово |

---

## Отчёты (в ops/)

- `ops/dedup_report.md` — анализ дедупликации (2 кластера)
- `ops/dedup_applied.md` — результат применения стабов
- `ops/term_norm_proposals.md` — предложения по терминологии
- `ops/metrics_report.md` — итоговые метрики
- `ops/PR_DRAFT.md` — черновик описания PR

---

## Коммиты

1. `refactor: merge work process documents into single file` — слияние 0.2 документов
2. `chore: move goals document to archive and fix 0.2 content names` — перемещение и переписание
3. `chore(content): normalize frontmatter across all md files` — фронтматтер
4. `chore(content): second-pass normalization with fuzzy matching` — fuzzy links
5. `chore(content): ignore table-header tokens in broken-name parsing` — фильтрация
6. `chore(content): add deduplication report and helper script` — дедуп анализ
7. `chore(docs): remove debug helpers; add PR draft for content normalization` — очистка
8. `chore(content): terminology normalization (automated)` — терминология

**Результат в main:** все коммиты влиты (PR #49 merged)

---

## Что осталось / рекомендации

### Обязательные (для production-готовности)
1. **Ревью дедуп-кластеров** (файлы с `status: review`) — решить, какие файлы архивировать/объединять
2. **Проверка терминов высокого риска** (Цифровой двойник, Платформа) — уточнить определения в глоссарии

### Желательные
1. Обновить глоссарий (добавить Онбординг, Маршрут развития, Резидента, Стажёра)
2. Убрать неиспользуемые термины (Вестинг, Code Review)
3. Добавить перекрёстные ссылки между глоссарием и Словарём сущностей

---

## Файлы, затронутые большинством

- Все 153 MD-файла в `content/` получили обновление фронтматтера
- Ключевые файлы с терминологией: Токеномика 3.1, Карта подсистем 3.2, Идеи развития 3.1
- Отчёты в `content/0.4`: Противоречия, Терминологическая согласованность (исходные — не изменены)

---

## Методология

**Консервативность:**
- Все замены либо в фронтматтере (структурированные), либо в теле текста (с пропуском кода)
- Дедупликация: пометка для ревью вместо автоматического удаления
- Без прямого удаления файлов (только архивирование по согласованию)

**Автоматизация + контроль:**
- Python-скрипты для массовых операций
- Сухие прогоны (dry-run) для проверки перед применением
- Отчёты для ручного ревью

---

## Контакт / вопросы

Все артефакты доступны в ветке `claude/refactor-content-coherence-20251212` (влита в main).
Скрипты остаются в `ops/` для будущих итераций нормализации.
